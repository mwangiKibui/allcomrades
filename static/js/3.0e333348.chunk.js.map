{"version":3,"sources":["../node_modules/photoswipe/dist/photoswipe.js","../node_modules/photoswipe/dist/photoswipe-ui-default.js"],"names":["template","UiClass","items","options","framework","features","bind","target","type","listener","unbind","methodName","split","i","length","isArray","obj","Array","createEl","classes","tag","el","document","createElement","className","getScrollY","yOffset","window","pageYOffset","undefined","documentElement","scrollTop","removeClass","reg","RegExp","replace","addClass","hasClass","test","getChildByClass","parentEl","childClassName","node","firstChild","nextSibling","arraySearch","array","value","key","extend","o1","o2","preventOverwrite","prop","hasOwnProperty","easing","sine","out","k","Math","sin","PI","inOut","cos","cubic","detectFeatures","helperStyle","style","vendor","oldIE","all","addEventListener","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","PointerEvent","navigator","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","parseInt","isOldIOSPhone","androidversion","parseFloat","isOldAndroid","androidVersion","isMobileOpera","styleCheckItem","styleName","styleChecks","vendors","a","charAt","toUpperCase","slice","toLowerCase","lastTime","fn","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout","svg","createElementNS","createSVGRect","evName","_handleEv","handleEvent","call","self","this","_options","allowPanToNext","spacing","bgOpacity","mouseUsed","loop","pinchToClose","closeOnScroll","closeOnVerticalDrag","verticalDragRange","hideAnimationDuration","showAnimationDuration","showHideOpacity","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","tagName","getDoubleTapZoom","isMouseClick","item","initialZoomLevel","maxSpreadZoom","modal","scaleMode","_isOpen","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_upMoveEvents","_downEvents","_globalEventHandlers","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_itemHolders","_prevItemIndex","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_likelyTouchDevice","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_orientationChangeTimeout","_gestureStartTime","_gestureCheckSpeedTime","_releaseAnimData","_isZoomingIn","_verticalDragInitiated","_oldAndroidTouchEndTimeout","_isDragging","_isMultitouch","_zoomStarted","_moved","_dragAnimFrame","_mainScrollShifted","_currentPoints","_isZooming","_startPointsDistance","_currPanBounds","_currZoomElementStyle","_mainScrollAnimating","_direction","_isFirstMove","_opacityChanged","_bgOpacity","_wasOverInitialZoom","_tempCounter","_currPanDist","x","y","_startPanOffset","_panOffset","_viewportSize","_currPositionIndex","_offset","_slideSize","_indexDiff","_isFixedPosition","_modules","_windowVisibleSize","_renderMaxResolution","_registerModule","name","module","publicMethods","push","_getLoopedId","index","numSlides","_getNumItems","_listeners","_listen","_shout","listeners","args","prototype","arguments","shift","apply","_getCurrentTime","_applyBgOpacity","opacity","bg","_applyZoomTransform","styleObj","zoom","currItem","fitRatio","_applyCurrentZoomPan","allowRenderResolution","_setImageSize","_applyZoomPanToItem","container","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","round","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","m","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","p","_mouseMoveTimeout","_onFirstMouseMove","_calculatePanBounds","update","bounds","_calculateItemSize","_getMinZoomLevel","_getMaxZoomLevel","w","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","min","_onKeyDown","e","keydownAction","keyCode","ctrlKey","altKey","shiftKey","metaKey","preventDefault","returnValue","_onGlobalClick","stopPropagation","_updatePageScrollOffset","setScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","d","easingFn","onUpdate","onComplete","t","startAnimTime","animloop","shout","listen","viewportSize","isMainScrollAnimating","getZoomLevel","getCurrentIndex","isDragging","isZooming","applyZoomPan","panX","panY","init","transform","scrollWrap","itemHolders","children","wrap","display","allow3dTransform","perspective","left","zoomRatio","s","h","width","height","top","_setupTransforms","resize","updateSize","orientationchange","clientWidth","scroll","keydown","click","oldPhone","animationName","ui","isNaN","_getItemAt","setAttribute","position","rootClasses","mainClass","setContent","updateCurrItem","setInterval","close","_showOrHide","destroy","_showOrHideTimeout","clearInterval","_stopDragUpdateLoop","panTo","force","event","goTo","diff","next","prev","updateCurrZoomItem","emulateSetContent","zoomElement","center","invalidateCurrItems","needsUpdate","beforeAnimation","tempHolder","diffAbs","abs","NUM_HOLDERS","pop","unshift","prevItem","windowScrollY","innerWidth","innerHeight","clientHeight","holder","hIndex","cleanSlide","zoomTo","centerPoint","speed","updateFn","initialPanOffset","now","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_posPoints","_tempPoint","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_currCenterPoint","_calculatePointsDistance","sqrt","_preventObj","_preventDefaultEventBehaviour","isDown","prevent","_closestElement","getAttribute","indexOf","parentNode","_convertTouchToPoint","pageX","pageY","identifier","_findCenterOfPoints","pCenter","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_getTouchPoints","forEach","touches","_panOrMoveMainScroll","panFriction","startOverDiff","newPanPos","newMainScrollPos","newOffset","dir","newMainScrollPosition","mainScrollDiff","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_dragUpdateLoop","_renderMovement","_onDragMove","touchesList","_isEqualPoints","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","percent","opacityRatio","time","o","_pushPosPoint","_onDragRelease","releasePoint","splice","4","2","3","pointerType","gestureType","touchList","changedTouches","releaseTimeDiff","_initDragReleaseAnimationData","calculateSwipeSpeed","initalPanY","initialBgOpacity","_finishSwipeMainScrollGesture","_completePanGesture","_completeZoomGesture","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","itemChanged","itemsDiff","nextCircle","totalShiftDist","isFastLastFlick","finishAnimDuration","animateToX","animateToDist","touchesDistance","initialOpacity","initGestures","addEventNames","pref","down","move","up","cancel","maxTouchPoints","msMaxTouchPoints","likelyTouchDevice","mousedown","mousemove","mouseup","_items","_initialContentSet","img","completeFn","thumbBounds","initialLayout","getThumbBoundsFn","duration","removeAttribute","closeWithRaf","fadeEverything","src","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","startAnimation","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","getNumItemsFn","isInitial","vGap","bottom","hRatio","vRatio","realPanElementW","realPanElementH","_calculateSingleItemPanBounds","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","appendChild","loaded","placeholder","_preloadImage","loading","loadComplete","onload","onerror","_checkForError","cleanUp","innerHTML","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","allowProgressiveImg","screen","html","placeholderClassName","msrc","tapTimer","_wheelDelta","tapReleasePoint","_dispatchTapEvent","origEvent","createEvent","eDetail","initCustomEvent","dispatchEvent","initTap","onTapStart","onTapRelease","touch0","touch1","p0","initDesktopZoom","setupDesktopZoom","onInit","events","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","detail","newPanX","newPanY","toggleDesktopZoom","doubleTapZoomLevel","zoomOut","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_historyDefaultOptions","history","galleryUID","_getHash","hash","substring","_cleanHistoryTimeouts","_parseItemIndexFromURL","params","vars","pair","galleryPIDs","searchfor","pid","_updateHash","newHash","newURL","href","location","title","initHistory","updateURL","onHashChange","returnToOriginal","back","pushState","pathname","search","pswp","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_initalCloseOnScrollValue","_isIdle","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_blockControlsTap","_idleInterval","_idleTimer","_overlayUIUpdated","_controlsVisible","_shareModalHidden","_defaultUIOptions","barsSize","closeElClasses","timeToIdle","timeToIdleOutside","loadingIndicatorDelay","addCaptionHTMLFn","captionEl","closeEl","fullscreenEl","zoomEl","shareEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","label","url","download","getImageURLForShare","getPageURLForShare","getTextForShare","indexIndicatorSep","fitControlsWidth","_onControlsTap","_onIdleMouseMove","uiElement","found","clickedClass","srcElement","_uiElements","onTap","tapDelay","_togglePswpClass","cName","add","_countNumItems","hasOneSlide","_toggleShareModalClass","_toggleShareModal","_updateShareURLs","_openWindowPopup","hasAttribute","open","shareButtonData","image_url","page_url","share_text","shareButtonOut","encodeURIComponent","parseShareButtonOut","onclick","_hasCloseClass","_idleIncrement","setIdle","_onMouseLeaveWindow","from","relatedTarget","toElement","nodeName","_toggleLoadingIndicator","hide","_applyNavBarGaps","gap","bars","insertBefore","captionSize","option","isFullscreen","exit","enter","pinchControlsHidden","hideControls","showControls","_setupHidingControlsDuringGestures","point","preventObj","onGlobalTap","onMouseOver","eventK","updateFullscreen","removeChild","classAttr","loopThroughChildElements","sChildren","l","topBar","_setupUIElements","getFullscreenAPI","naturalWidth","isIdle","updateIndexIndicator","supportsFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","api","dE","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT"],"mappings":"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","file":"static/js/3.0e333348.chunk.js","sourcesContent":["/*! PhotoSwipe - v4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipe = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipe = function PhotoSwipe(template, UiClass, items, options) {\n    /*>>framework-bridge*/\n\n    /**\n     *\n     * Set of generic functions used by gallery.\n     * \n     * You're free to modify anything here as long as functionality is kept.\n     * \n     */\n    var framework = {\n      features: null,\n      bind: function bind(target, type, listener, unbind) {\n        var methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n        type = type.split(' ');\n\n        for (var i = 0; i < type.length; i++) {\n          if (type[i]) {\n            target[methodName](type[i], listener, false);\n          }\n        }\n      },\n      isArray: function isArray(obj) {\n        return obj instanceof Array;\n      },\n      createEl: function createEl(classes, tag) {\n        var el = document.createElement(tag || 'div');\n\n        if (classes) {\n          el.className = classes;\n        }\n\n        return el;\n      },\n      getScrollY: function getScrollY() {\n        var yOffset = window.pageYOffset;\n        return yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n      },\n      unbind: function unbind(target, type, listener) {\n        framework.bind(target, type, listener, true);\n      },\n      removeClass: function removeClass(el, className) {\n        var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n        el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      },\n      addClass: function addClass(el, className) {\n        if (!framework.hasClass(el, className)) {\n          el.className += (el.className ? ' ' : '') + className;\n        }\n      },\n      hasClass: function hasClass(el, className) {\n        return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n      },\n      getChildByClass: function getChildByClass(parentEl, childClassName) {\n        var node = parentEl.firstChild;\n\n        while (node) {\n          if (framework.hasClass(node, childClassName)) {\n            return node;\n          }\n\n          node = node.nextSibling;\n        }\n      },\n      arraySearch: function arraySearch(array, value, key) {\n        var i = array.length;\n\n        while (i--) {\n          if (array[i][key] === value) {\n            return i;\n          }\n        }\n\n        return -1;\n      },\n      extend: function extend(o1, o2, preventOverwrite) {\n        for (var prop in o2) {\n          if (o2.hasOwnProperty(prop)) {\n            if (preventOverwrite && o1.hasOwnProperty(prop)) {\n              continue;\n            }\n\n            o1[prop] = o2[prop];\n          }\n        }\n      },\n      easing: {\n        sine: {\n          out: function out(k) {\n            return Math.sin(k * (Math.PI / 2));\n          },\n          inOut: function inOut(k) {\n            return -(Math.cos(Math.PI * k) - 1) / 2;\n          }\n        },\n        cubic: {\n          out: function out(k) {\n            return --k * k * k + 1;\n          }\n        }\n        /*\n        \telastic: {\n        \t\tout: function ( k ) {\n        \t\t\t\tvar s, a = 0.1, p = 0.4;\n        \t\t\tif ( k === 0 ) return 0;\n        \t\t\tif ( k === 1 ) return 1;\n        \t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\n        \t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n        \t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n        \t\t\t},\n        \t},\n        \tback: {\n        \t\tout: function ( k ) {\n        \t\t\tvar s = 1.70158;\n        \t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\n        \t\t}\n        \t}\n        */\n\n      },\n\n      /**\n       * \n       * @return {object}\n       * \n       * {\n       *  raf : request animation frame function\n       *  caf : cancel animation frame function\n       *  transfrom : transform property key (with vendor), or null if not supported\n       *  oldIE : IE8 or below\n       * }\n       * \n       */\n      detectFeatures: function detectFeatures() {\n        if (framework.features) {\n          return framework.features;\n        }\n\n        var helperEl = framework.createEl(),\n            helperStyle = helperEl.style,\n            vendor = '',\n            features = {}; // IE8 and below\n\n        features.oldIE = document.all && !document.addEventListener;\n        features.touch = 'ontouchstart' in window;\n\n        if (window.requestAnimationFrame) {\n          features.raf = window.requestAnimationFrame;\n          features.caf = window.cancelAnimationFrame;\n        }\n\n        features.pointerEvent = !!window.PointerEvent || navigator.msPointerEnabled; // fix false-positive detection of old Android in new IE\n        // (IE11 ua string contains \"Android 4.0\")\n\n        if (!features.pointerEvent) {\n          var ua = navigator.userAgent; // Detect if device is iPhone or iPod and if it's older than iOS 8\n          // http://stackoverflow.com/a/14223920\n          // \n          // This detection is made because of buggy top/bottom toolbars\n          // that don't trigger window.resize event.\n          // For more info refer to _isFixedPosition variable in core.js\n\n          if (/iP(hone|od)/.test(navigator.platform)) {\n            var v = navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\n            if (v && v.length > 0) {\n              v = parseInt(v[1], 10);\n\n              if (v >= 1 && v < 8) {\n                features.isOldIOSPhone = true;\n              }\n            }\n          } // Detect old Android (before KitKat)\n          // due to bugs related to position:fixed\n          // http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\n\n          var match = ua.match(/Android\\s([0-9\\.]*)/);\n          var androidversion = match ? match[1] : 0;\n          androidversion = parseFloat(androidversion);\n\n          if (androidversion >= 1) {\n            if (androidversion < 4.4) {\n              features.isOldAndroid = true; // for fixed position bug & performance\n            }\n\n            features.androidVersion = androidversion; // for touchend bug\n          }\n\n          features.isMobileOpera = /opera mini|opera mobi/i.test(ua); // p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n        }\n\n        var styleChecks = ['transform', 'perspective', 'animationName'],\n            vendors = ['', 'webkit', 'Moz', 'ms', 'O'],\n            styleCheckItem,\n            styleName;\n\n        for (var i = 0; i < 4; i++) {\n          vendor = vendors[i];\n\n          for (var a = 0; a < 3; a++) {\n            styleCheckItem = styleChecks[a]; // uppercase first letter of property name, if vendor is present\n\n            styleName = vendor + (vendor ? styleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : styleCheckItem);\n\n            if (!features[styleCheckItem] && styleName in helperStyle) {\n              features[styleCheckItem] = styleName;\n            }\n          }\n\n          if (vendor && !features.raf) {\n            vendor = vendor.toLowerCase();\n            features.raf = window[vendor + 'RequestAnimationFrame'];\n\n            if (features.raf) {\n              features.caf = window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];\n            }\n          }\n        }\n\n        if (!features.raf) {\n          var lastTime = 0;\n\n          features.raf = function (fn) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n              fn(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n          };\n\n          features.caf = function (id) {\n            clearTimeout(id);\n          };\n        } // Detect SVG support\n\n\n        features.svg = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n        framework.features = features;\n        return features;\n      }\n    };\n    framework.detectFeatures(); // Override addEventListener for old versions of IE\n\n    if (framework.features.oldIE) {\n      framework.bind = function (target, type, listener, unbind) {\n        type = type.split(' ');\n\n        var methodName = (unbind ? 'detach' : 'attach') + 'Event',\n            evName,\n            _handleEv = function _handleEv() {\n          listener.handleEvent.call(listener);\n        };\n\n        for (var i = 0; i < type.length; i++) {\n          evName = type[i];\n\n          if (evName) {\n            if (typeof listener === 'object' && listener.handleEvent) {\n              if (!unbind) {\n                listener['oldIE' + evName] = _handleEv;\n              } else {\n                if (!listener['oldIE' + evName]) {\n                  return false;\n                }\n              }\n\n              target[methodName]('on' + evName, listener['oldIE' + evName]);\n            } else {\n              target[methodName]('on' + evName, listener);\n            }\n          }\n        }\n      };\n    }\n    /*>>framework-bridge*/\n\n    /*>>core*/\n    //function(template, UiClass, items, options)\n\n\n    var self = this;\n    /**\n     * Static vars, don't change unless you know what you're doing.\n     */\n\n    var DOUBLE_TAP_RADIUS = 25,\n        NUM_HOLDERS = 3;\n    /**\n     * Options\n     */\n\n    var _options = {\n      allowPanToNext: true,\n      spacing: 0.12,\n      bgOpacity: 1,\n      mouseUsed: false,\n      loop: true,\n      pinchToClose: true,\n      closeOnScroll: true,\n      closeOnVerticalDrag: true,\n      verticalDragRange: 0.75,\n      hideAnimationDuration: 333,\n      showAnimationDuration: 333,\n      showHideOpacity: false,\n      focus: true,\n      escKey: true,\n      arrowKeys: true,\n      mainScrollEndFriction: 0.35,\n      panEndFriction: 0.35,\n      isClickableElement: function isClickableElement(el) {\n        return el.tagName === 'A';\n      },\n      getDoubleTapZoom: function getDoubleTapZoom(isMouseClick, item) {\n        if (isMouseClick) {\n          return 1;\n        } else {\n          return item.initialZoomLevel < 0.7 ? 1 : 1.33;\n        }\n      },\n      maxSpreadZoom: 1.33,\n      modal: true,\n      // not fully implemented yet\n      scaleMode: 'fit' // TODO\n\n    };\n    framework.extend(_options, options);\n    /**\n     * Private helper variables & functions\n     */\n\n    var _getEmptyPoint = function _getEmptyPoint() {\n      return {\n        x: 0,\n        y: 0\n      };\n    };\n\n    var _isOpen,\n        _isDestroying,\n        _closedByScroll,\n        _currentItemIndex,\n        _containerStyle,\n        _containerShiftIndex,\n        _currPanDist = _getEmptyPoint(),\n        _startPanOffset = _getEmptyPoint(),\n        _panOffset = _getEmptyPoint(),\n        _upMoveEvents,\n        // drag move, drag end & drag cancel events array\n    _downEvents,\n        // drag start events array\n    _globalEventHandlers,\n        _viewportSize = {},\n        _currZoomLevel,\n        _startZoomLevel,\n        _translatePrefix,\n        _translateSufix,\n        _updateSizeInterval,\n        _itemsNeedUpdate,\n        _currPositionIndex = 0,\n        _offset = {},\n        _slideSize = _getEmptyPoint(),\n        // size of slide area, including spacing\n    _itemHolders,\n        _prevItemIndex,\n        _indexDiff = 0,\n        // difference of indexes since last content update\n    _dragStartEvent,\n        _dragMoveEvent,\n        _dragEndEvent,\n        _dragCancelEvent,\n        _transformKey,\n        _pointerEventEnabled,\n        _isFixedPosition = true,\n        _likelyTouchDevice,\n        _modules = [],\n        _requestAF,\n        _cancelAF,\n        _initalClassName,\n        _initalWindowScrollY,\n        _oldIE,\n        _currentWindowScrollY,\n        _features,\n        _windowVisibleSize = {},\n        _renderMaxResolution = false,\n        _orientationChangeTimeout,\n        // Registers PhotoSWipe module (History, Controller ...)\n    _registerModule = function _registerModule(name, module) {\n      framework.extend(self, module.publicMethods);\n\n      _modules.push(name);\n    },\n        _getLoopedId = function _getLoopedId(index) {\n      var numSlides = _getNumItems();\n\n      if (index > numSlides - 1) {\n        return index - numSlides;\n      } else if (index < 0) {\n        return numSlides + index;\n      }\n\n      return index;\n    },\n        // Micro bind/trigger\n    _listeners = {},\n        _listen = function _listen(name, fn) {\n      if (!_listeners[name]) {\n        _listeners[name] = [];\n      }\n\n      return _listeners[name].push(fn);\n    },\n        _shout = function _shout(name) {\n      var listeners = _listeners[name];\n\n      if (listeners) {\n        var args = Array.prototype.slice.call(arguments);\n        args.shift();\n\n        for (var i = 0; i < listeners.length; i++) {\n          listeners[i].apply(self, args);\n        }\n      }\n    },\n        _getCurrentTime = function _getCurrentTime() {\n      return new Date().getTime();\n    },\n        _applyBgOpacity = function _applyBgOpacity(opacity) {\n      _bgOpacity = opacity;\n      self.bg.style.opacity = opacity * _options.bgOpacity;\n    },\n        _applyZoomTransform = function _applyZoomTransform(styleObj, x, y, zoom, item) {\n      if (!_renderMaxResolution || item && item !== self.currItem) {\n        zoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\n      }\n\n      styleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n    },\n        _applyCurrentZoomPan = function _applyCurrentZoomPan(allowRenderResolution) {\n      if (_currZoomElementStyle) {\n        if (allowRenderResolution) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            if (!_renderMaxResolution) {\n              _setImageSize(self.currItem, false, true);\n\n              _renderMaxResolution = true;\n            }\n          } else {\n            if (_renderMaxResolution) {\n              _setImageSize(self.currItem);\n\n              _renderMaxResolution = false;\n            }\n          }\n        }\n\n        _applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n      }\n    },\n        _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n      if (item.container) {\n        _applyZoomTransform(item.container.style, item.initialPosition.x, item.initialPosition.y, item.initialZoomLevel, item);\n      }\n    },\n        _setTranslateX = function _setTranslateX(x, elStyle) {\n      elStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n    },\n        _moveMainScroll = function _moveMainScroll(x, dragging) {\n      if (!_options.loop && dragging) {\n        var newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n            delta = Math.round(x - _mainScrollPos.x);\n\n        if (newSlideIndexOffset < 0 && delta > 0 || newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) {\n          x = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n        }\n      }\n\n      _mainScrollPos.x = x;\n\n      _setTranslateX(x, _containerStyle);\n    },\n        _calculatePanOffset = function _calculatePanOffset(axis, zoomLevel) {\n      var m = _midZoomPoint[axis] - _offset[axis];\n      return _startPanOffset[axis] + _currPanDist[axis] + m - m * (zoomLevel / _startZoomLevel);\n    },\n        _equalizePoints = function _equalizePoints(p1, p2) {\n      p1.x = p2.x;\n      p1.y = p2.y;\n\n      if (p2.id) {\n        p1.id = p2.id;\n      }\n    },\n        _roundPoint = function _roundPoint(p) {\n      p.x = Math.round(p.x);\n      p.y = Math.round(p.y);\n    },\n        _mouseMoveTimeout = null,\n        _onFirstMouseMove = function _onFirstMouseMove() {\n      // Wait until mouse move event is fired at least twice during 100ms\n      // We do this, because some mobile browsers trigger it on touchstart\n      if (_mouseMoveTimeout) {\n        framework.unbind(document, 'mousemove', _onFirstMouseMove);\n        framework.addClass(template, 'pswp--has_mouse');\n        _options.mouseUsed = true;\n\n        _shout('mouseUsed');\n      }\n\n      _mouseMoveTimeout = setTimeout(function () {\n        _mouseMoveTimeout = null;\n      }, 100);\n    },\n        _bindEvents = function _bindEvents() {\n      framework.bind(document, 'keydown', self);\n\n      if (_features.transform) {\n        // don't bind click event in browsers that don't support transform (mostly IE8)\n        framework.bind(self.scrollWrap, 'click', self);\n      }\n\n      if (!_options.mouseUsed) {\n        framework.bind(document, 'mousemove', _onFirstMouseMove);\n      }\n\n      framework.bind(window, 'resize scroll orientationchange', self);\n\n      _shout('bindEvents');\n    },\n        _unbindEvents = function _unbindEvents() {\n      framework.unbind(window, 'resize scroll orientationchange', self);\n      framework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n      framework.unbind(document, 'keydown', self);\n      framework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n      if (_features.transform) {\n        framework.unbind(self.scrollWrap, 'click', self);\n      }\n\n      if (_isDragging) {\n        framework.unbind(window, _upMoveEvents, self);\n      }\n\n      clearTimeout(_orientationChangeTimeout);\n\n      _shout('unbindEvents');\n    },\n        _calculatePanBounds = function _calculatePanBounds(zoomLevel, update) {\n      var bounds = _calculateItemSize(self.currItem, _viewportSize, zoomLevel);\n\n      if (update) {\n        _currPanBounds = bounds;\n      }\n\n      return bounds;\n    },\n        _getMinZoomLevel = function _getMinZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.initialZoomLevel;\n    },\n        _getMaxZoomLevel = function _getMaxZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.w > 0 ? _options.maxSpreadZoom : 1;\n    },\n        // Return true if offset is out of the bounds\n    _modifyDestPanOffset = function _modifyDestPanOffset(axis, destPanBounds, destPanOffset, destZoomLevel) {\n      if (destZoomLevel === self.currItem.initialZoomLevel) {\n        destPanOffset[axis] = self.currItem.initialPosition[axis];\n        return true;\n      } else {\n        destPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\n\n        if (destPanOffset[axis] > destPanBounds.min[axis]) {\n          destPanOffset[axis] = destPanBounds.min[axis];\n          return true;\n        } else if (destPanOffset[axis] < destPanBounds.max[axis]) {\n          destPanOffset[axis] = destPanBounds.max[axis];\n          return true;\n        }\n      }\n\n      return false;\n    },\n        _setupTransforms = function _setupTransforms() {\n      if (_transformKey) {\n        // setup 3d transforms\n        var allow3dTransform = _features.perspective && !_likelyTouchDevice;\n        _translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n        _translateSufix = _features.perspective ? ', 0px)' : ')';\n        return;\n      } // Override zoom/pan/move functions in case old browser is used (most likely IE)\n      // (so they use left/top/width/height, instead of CSS transform)\n\n\n      _transformKey = 'left';\n      framework.addClass(template, 'pswp--ie');\n\n      _setTranslateX = function _setTranslateX(x, elStyle) {\n        elStyle.left = x + 'px';\n      };\n\n      _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n        var zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n            s = item.container.style,\n            w = zoomRatio * item.w,\n            h = zoomRatio * item.h;\n        s.width = w + 'px';\n        s.height = h + 'px';\n        s.left = item.initialPosition.x + 'px';\n        s.top = item.initialPosition.y + 'px';\n      };\n\n      _applyCurrentZoomPan = function _applyCurrentZoomPan() {\n        if (_currZoomElementStyle) {\n          var s = _currZoomElementStyle,\n              item = self.currItem,\n              zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n              w = zoomRatio * item.w,\n              h = zoomRatio * item.h;\n          s.width = w + 'px';\n          s.height = h + 'px';\n          s.left = _panOffset.x + 'px';\n          s.top = _panOffset.y + 'px';\n        }\n      };\n    },\n        _onKeyDown = function _onKeyDown(e) {\n      var keydownAction = '';\n\n      if (_options.escKey && e.keyCode === 27) {\n        keydownAction = 'close';\n      } else if (_options.arrowKeys) {\n        if (e.keyCode === 37) {\n          keydownAction = 'prev';\n        } else if (e.keyCode === 39) {\n          keydownAction = 'next';\n        }\n      }\n\n      if (keydownAction) {\n        // don't do anything if special key pressed to prevent from overriding default browser actions\n        // e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n        if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n\n          self[keydownAction]();\n        }\n      }\n    },\n        _onGlobalClick = function _onGlobalClick(e) {\n      if (!e) {\n        return;\n      } // don't allow click event to pass through when triggering after drag or some other gesture\n\n\n      if (_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n        _updatePageScrollOffset = function _updatePageScrollOffset() {\n      self.setScrollOffset(0, framework.getScrollY());\n    }; // Micro animation engine\n\n\n    var _animations = {},\n        _numAnimations = 0,\n        _stopAnimation = function _stopAnimation(name) {\n      if (_animations[name]) {\n        if (_animations[name].raf) {\n          _cancelAF(_animations[name].raf);\n        }\n\n        _numAnimations--;\n        delete _animations[name];\n      }\n    },\n        _registerStartAnimation = function _registerStartAnimation(name) {\n      if (_animations[name]) {\n        _stopAnimation(name);\n      }\n\n      if (!_animations[name]) {\n        _numAnimations++;\n        _animations[name] = {};\n      }\n    },\n        _stopAllAnimations = function _stopAllAnimations() {\n      for (var prop in _animations) {\n        if (_animations.hasOwnProperty(prop)) {\n          _stopAnimation(prop);\n        }\n      }\n    },\n        _animateProp = function _animateProp(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime = _getCurrentTime(),\n          t;\n\n      _registerStartAnimation(name);\n\n      var animloop = function animloop() {\n        if (_animations[name]) {\n          t = _getCurrentTime() - startAnimTime; // time diff\n          //b - beginning (start prop)\n          //d - anim duration\n\n          if (t >= d) {\n            _stopAnimation(name);\n\n            onUpdate(endProp);\n\n            if (onComplete) {\n              onComplete();\n            }\n\n            return;\n          }\n\n          onUpdate((endProp - b) * easingFn(t / d) + b);\n          _animations[name].raf = _requestAF(animloop);\n        }\n      };\n\n      animloop();\n    };\n\n    var publicMethods = {\n      // make a few local variables and functions public\n      shout: _shout,\n      listen: _listen,\n      viewportSize: _viewportSize,\n      options: _options,\n      isMainScrollAnimating: function isMainScrollAnimating() {\n        return _mainScrollAnimating;\n      },\n      getZoomLevel: function getZoomLevel() {\n        return _currZoomLevel;\n      },\n      getCurrentIndex: function getCurrentIndex() {\n        return _currentItemIndex;\n      },\n      isDragging: function isDragging() {\n        return _isDragging;\n      },\n      isZooming: function isZooming() {\n        return _isZooming;\n      },\n      setScrollOffset: function setScrollOffset(x, y) {\n        _offset.x = x;\n        _currentWindowScrollY = _offset.y = y;\n\n        _shout('updateScrollOffset', _offset);\n      },\n      applyZoomPan: function applyZoomPan(zoomLevel, panX, panY, allowRenderResolution) {\n        _panOffset.x = panX;\n        _panOffset.y = panY;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan(allowRenderResolution);\n      },\n      init: function init() {\n        if (_isOpen || _isDestroying) {\n          return;\n        }\n\n        var i;\n        self.framework = framework; // basic functionality\n\n        self.template = template; // root DOM element of PhotoSwipe\n\n        self.bg = framework.getChildByClass(template, 'pswp__bg');\n        _initalClassName = template.className;\n        _isOpen = true;\n        _features = framework.detectFeatures();\n        _requestAF = _features.raf;\n        _cancelAF = _features.caf;\n        _transformKey = _features.transform;\n        _oldIE = _features.oldIE;\n        self.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n        self.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n        _containerStyle = self.container.style; // for fast access\n        // Objects that hold slides (there are only 3 in DOM)\n\n        self.itemHolders = _itemHolders = [{\n          el: self.container.children[0],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[1],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[2],\n          wrap: 0,\n          index: -1\n        }]; // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n\n        _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n        _setupTransforms(); // Setup global events\n\n\n        _globalEventHandlers = {\n          resize: self.updateSize,\n          // Fixes: iOS 10.3 resize event\n          // does not update scrollWrap.clientWidth instantly after resize\n          // https://github.com/dimsemenov/PhotoSwipe/issues/1315\n          orientationchange: function orientationchange() {\n            clearTimeout(_orientationChangeTimeout);\n            _orientationChangeTimeout = setTimeout(function () {\n              if (_viewportSize.x !== self.scrollWrap.clientWidth) {\n                self.updateSize();\n              }\n            }, 500);\n          },\n          scroll: _updatePageScrollOffset,\n          keydown: _onKeyDown,\n          click: _onGlobalClick\n        }; // disable show/hide effects on old browsers that don't support CSS animations or transforms, \n        // old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n\n        var oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n\n        if (!_features.animationName || !_features.transform || oldPhone) {\n          _options.showAnimationDuration = _options.hideAnimationDuration = 0;\n        } // init modules\n\n\n        for (i = 0; i < _modules.length; i++) {\n          self['init' + _modules[i]]();\n        } // init\n\n\n        if (UiClass) {\n          var ui = self.ui = new UiClass(self, framework);\n          ui.init();\n        }\n\n        _shout('firstUpdate');\n\n        _currentItemIndex = _currentItemIndex || _options.index || 0; // validate index\n\n        if (isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = 0;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n\n        if (_features.isOldIOSPhone || _features.isOldAndroid) {\n          _isFixedPosition = false;\n        }\n\n        template.setAttribute('aria-hidden', 'false');\n\n        if (_options.modal) {\n          if (!_isFixedPosition) {\n            template.style.position = 'absolute';\n            template.style.top = framework.getScrollY() + 'px';\n          } else {\n            template.style.position = 'fixed';\n          }\n        }\n\n        if (_currentWindowScrollY === undefined) {\n          _shout('initialLayout');\n\n          _currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n        } // add classes to root element of PhotoSwipe\n\n\n        var rootClasses = 'pswp--open ';\n\n        if (_options.mainClass) {\n          rootClasses += _options.mainClass + ' ';\n        }\n\n        if (_options.showHideOpacity) {\n          rootClasses += 'pswp--animate_opacity ';\n        }\n\n        rootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n        rootClasses += _features.animationName ? ' pswp--css_animation' : '';\n        rootClasses += _features.svg ? ' pswp--svg' : '';\n        framework.addClass(template, rootClasses);\n        self.updateSize(); // initial update\n\n        _containerShiftIndex = -1;\n        _indexDiff = null;\n\n        for (i = 0; i < NUM_HOLDERS; i++) {\n          _setTranslateX((i + _containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n        }\n\n        if (!_oldIE) {\n          framework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n        }\n\n        _listen('initialZoomInEnd', function () {\n          self.setContent(_itemHolders[0], _currentItemIndex - 1);\n          self.setContent(_itemHolders[2], _currentItemIndex + 1);\n          _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n          if (_options.focus) {\n            // focus causes layout, \n            // which causes lag during the animation, \n            // that's why we delay it untill the initial zoom transition ends\n            template.focus();\n          }\n\n          _bindEvents();\n        }); // set content for center slide (first time)\n\n\n        self.setContent(_itemHolders[1], _currentItemIndex);\n        self.updateCurrItem();\n\n        _shout('afterInit');\n\n        if (!_isFixedPosition) {\n          // On all versions of iOS lower than 8.0, we check size of viewport every second.\n          // \n          // This is done to detect when Safari top & bottom bars appear, \n          // as this action doesn't trigger any events (like resize). \n          // \n          // On iOS8 they fixed this.\n          // \n          // 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n          _updateSizeInterval = setInterval(function () {\n            if (!_numAnimations && !_isDragging && !_isZooming && _currZoomLevel === self.currItem.initialZoomLevel) {\n              self.updateSize();\n            }\n          }, 1000);\n        }\n\n        framework.addClass(template, 'pswp--visible');\n      },\n      // Close the gallery, then destroy it\n      close: function close() {\n        if (!_isOpen) {\n          return;\n        }\n\n        _isOpen = false;\n        _isDestroying = true;\n\n        _shout('close');\n\n        _unbindEvents();\n\n        _showOrHide(self.currItem, null, true, self.destroy);\n      },\n      // destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n      destroy: function destroy() {\n        _shout('destroy');\n\n        if (_showOrHideTimeout) {\n          clearTimeout(_showOrHideTimeout);\n        }\n\n        template.setAttribute('aria-hidden', 'true');\n        template.className = _initalClassName;\n\n        if (_updateSizeInterval) {\n          clearInterval(_updateSizeInterval);\n        }\n\n        framework.unbind(self.scrollWrap, _downEvents, self); // we unbind scroll event at the end, as closing animation may depend on it\n\n        framework.unbind(window, 'scroll', self);\n\n        _stopDragUpdateLoop();\n\n        _stopAllAnimations();\n\n        _listeners = null;\n      },\n\n      /**\n       * Pan image to position\n       * @param {Number} x     \n       * @param {Number} y     \n       * @param {Boolean} force Will ignore bounds if set to true.\n       */\n      panTo: function panTo(x, y, force) {\n        if (!force) {\n          if (x > _currPanBounds.min.x) {\n            x = _currPanBounds.min.x;\n          } else if (x < _currPanBounds.max.x) {\n            x = _currPanBounds.max.x;\n          }\n\n          if (y > _currPanBounds.min.y) {\n            y = _currPanBounds.min.y;\n          } else if (y < _currPanBounds.max.y) {\n            y = _currPanBounds.max.y;\n          }\n        }\n\n        _panOffset.x = x;\n        _panOffset.y = y;\n\n        _applyCurrentZoomPan();\n      },\n      handleEvent: function handleEvent(e) {\n        e = e || window.event;\n\n        if (_globalEventHandlers[e.type]) {\n          _globalEventHandlers[e.type](e);\n        }\n      },\n      goTo: function goTo(index) {\n        index = _getLoopedId(index);\n        var diff = index - _currentItemIndex;\n        _indexDiff = diff;\n        _currentItemIndex = index;\n        self.currItem = _getItemAt(_currentItemIndex);\n        _currPositionIndex -= diff;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        self.updateCurrItem();\n      },\n      next: function next() {\n        self.goTo(_currentItemIndex + 1);\n      },\n      prev: function prev() {\n        self.goTo(_currentItemIndex - 1);\n      },\n      // update current zoom/pan objects\n      updateCurrZoomItem: function updateCurrZoomItem(emulateSetContent) {\n        if (emulateSetContent) {\n          _shout('beforeChange', 0);\n        } // itemHolder[1] is middle (current) item\n\n\n        if (_itemHolders[1].el.children.length) {\n          var zoomElement = _itemHolders[1].el.children[0];\n\n          if (framework.hasClass(zoomElement, 'pswp__zoom-wrap')) {\n            _currZoomElementStyle = zoomElement.style;\n          } else {\n            _currZoomElementStyle = null;\n          }\n        } else {\n          _currZoomElementStyle = null;\n        }\n\n        _currPanBounds = self.currItem.bounds;\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _panOffset.x = _currPanBounds.center.x;\n        _panOffset.y = _currPanBounds.center.y;\n\n        if (emulateSetContent) {\n          _shout('afterChange');\n        }\n      },\n      invalidateCurrItems: function invalidateCurrItems() {\n        _itemsNeedUpdate = true;\n\n        for (var i = 0; i < NUM_HOLDERS; i++) {\n          if (_itemHolders[i].item) {\n            _itemHolders[i].item.needsUpdate = true;\n          }\n        }\n      },\n      updateCurrItem: function updateCurrItem(beforeAnimation) {\n        if (_indexDiff === 0) {\n          return;\n        }\n\n        var diffAbs = Math.abs(_indexDiff),\n            tempHolder;\n\n        if (beforeAnimation && diffAbs < 2) {\n          return;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n        _renderMaxResolution = false;\n\n        _shout('beforeChange', _indexDiff);\n\n        if (diffAbs >= NUM_HOLDERS) {\n          _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n          diffAbs = NUM_HOLDERS;\n        }\n\n        for (var i = 0; i < diffAbs; i++) {\n          if (_indexDiff > 0) {\n            tempHolder = _itemHolders.shift();\n            _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n            _containerShiftIndex++;\n\n            _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n          } else {\n            tempHolder = _itemHolders.pop();\n\n            _itemHolders.unshift(tempHolder); // move last to first\n\n\n            _containerShiftIndex--;\n\n            _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n          }\n        } // reset zoom/pan on previous item\n\n\n        if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n          var prevItem = _getItemAt(_prevItemIndex);\n\n          if (prevItem.initialZoomLevel !== _currZoomLevel) {\n            _calculateItemSize(prevItem, _viewportSize);\n\n            _setImageSize(prevItem);\n\n            _applyZoomPanToItem(prevItem);\n          }\n        } // reset diff after update\n\n\n        _indexDiff = 0;\n        self.updateCurrZoomItem();\n        _prevItemIndex = _currentItemIndex;\n\n        _shout('afterChange');\n      },\n      updateSize: function updateSize(force) {\n        if (!_isFixedPosition && _options.modal) {\n          var windowScrollY = framework.getScrollY();\n\n          if (_currentWindowScrollY !== windowScrollY) {\n            template.style.top = windowScrollY + 'px';\n            _currentWindowScrollY = windowScrollY;\n          }\n\n          if (!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n            return;\n          }\n\n          _windowVisibleSize.x = window.innerWidth;\n          _windowVisibleSize.y = window.innerHeight; //template.style.width = _windowVisibleSize.x + 'px';\n\n          template.style.height = _windowVisibleSize.y + 'px';\n        }\n\n        _viewportSize.x = self.scrollWrap.clientWidth;\n        _viewportSize.y = self.scrollWrap.clientHeight;\n\n        _updatePageScrollOffset();\n\n        _slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n        _slideSize.y = _viewportSize.y;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _shout('beforeResize'); // even may be used for example to switch image sources\n        // don't re-calculate size on inital size update\n\n\n        if (_containerShiftIndex !== undefined) {\n          var holder, item, hIndex;\n\n          for (var i = 0; i < NUM_HOLDERS; i++) {\n            holder = _itemHolders[i];\n\n            _setTranslateX((i + _containerShiftIndex) * _slideSize.x, holder.el.style);\n\n            hIndex = _currentItemIndex + i - 1;\n\n            if (_options.loop && _getNumItems() > 2) {\n              hIndex = _getLoopedId(hIndex);\n            } // update zoom level on items and refresh source (if needsUpdate)\n\n\n            item = _getItemAt(hIndex); // re-render gallery item if `needsUpdate`,\n            // or doesn't have `bounds` (entirely new slide object)\n\n            if (item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds)) {\n              self.cleanSlide(item);\n              self.setContent(holder, hIndex); // if \"center\" slide\n\n              if (i === 1) {\n                self.currItem = item;\n                self.updateCurrZoomItem(true);\n              }\n\n              item.needsUpdate = false;\n            } else if (holder.index === -1 && hIndex >= 0) {\n              // add content first time\n              self.setContent(holder, hIndex);\n            }\n\n            if (item && item.container) {\n              _calculateItemSize(item, _viewportSize);\n\n              _setImageSize(item);\n\n              _applyZoomPanToItem(item);\n            }\n          }\n\n          _itemsNeedUpdate = false;\n        }\n\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _currPanBounds = self.currItem.bounds;\n\n        if (_currPanBounds) {\n          _panOffset.x = _currPanBounds.center.x;\n          _panOffset.y = _currPanBounds.center.y;\n\n          _applyCurrentZoomPan(true);\n        }\n\n        _shout('resize');\n      },\n      // Zoom current item to\n      zoomTo: function zoomTo(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n        /*\n        \tif(destZoomLevel === 'fit') {\n        \t\tdestZoomLevel = self.currItem.fitRatio;\n        \t} else if(destZoomLevel === 'fill') {\n        \t\tdestZoomLevel = self.currItem.fillRatio;\n        \t}\n        */\n        if (centerPoint) {\n          _startZoomLevel = _currZoomLevel;\n          _midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x;\n          _midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y;\n\n          _equalizePoints(_startPanOffset, _panOffset);\n        }\n\n        var destPanBounds = _calculatePanBounds(destZoomLevel, false),\n            destPanOffset = {};\n\n        _modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n\n        _modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n        var initialZoomLevel = _currZoomLevel;\n        var initialPanOffset = {\n          x: _panOffset.x,\n          y: _panOffset.y\n        };\n\n        _roundPoint(destPanOffset);\n\n        var onUpdate = function onUpdate(now) {\n          if (now === 1) {\n            _currZoomLevel = destZoomLevel;\n            _panOffset.x = destPanOffset.x;\n            _panOffset.y = destPanOffset.y;\n          } else {\n            _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n            _panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n            _panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n          }\n\n          if (updateFn) {\n            updateFn(now);\n          }\n\n          _applyCurrentZoomPan(now === 1);\n        };\n\n        if (speed) {\n          _animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n        } else {\n          onUpdate(1);\n        }\n      }\n    };\n    /*>>core*/\n\n    /*>>gestures*/\n\n    /**\n     * Mouse/touch/pointer event handlers.\n     * \n     * separated from @core.js for readability\n     */\n\n    var MIN_SWIPE_DISTANCE = 30,\n        DIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\n    var _gestureStartTime,\n        _gestureCheckSpeedTime,\n        // pool of objects that are used during dragging of zooming\n    p = {},\n        // first point\n    p2 = {},\n        // second point (for zoom gesture)\n    delta = {},\n        _currPoint = {},\n        _startPoint = {},\n        _currPointers = [],\n        _startMainScrollPos = {},\n        _releaseAnimData,\n        _posPoints = [],\n        // array of points during dragging, used to determine type of gesture\n    _tempPoint = {},\n        _isZoomingIn,\n        _verticalDragInitiated,\n        _oldAndroidTouchEndTimeout,\n        _currZoomedItemIndex = 0,\n        _centerPoint = _getEmptyPoint(),\n        _lastReleaseTime = 0,\n        _isDragging,\n        // at least one pointer is down\n    _isMultitouch,\n        // at least two _pointers are down\n    _zoomStarted,\n        // zoom level changed during zoom gesture\n    _moved,\n        _dragAnimFrame,\n        _mainScrollShifted,\n        _currentPoints,\n        // array of current touch points\n    _isZooming,\n        _currPointsDistance,\n        _startPointsDistance,\n        _currPanBounds,\n        _mainScrollPos = _getEmptyPoint(),\n        _currZoomElementStyle,\n        _mainScrollAnimating,\n        // true, if animation after swipe gesture is running\n    _midZoomPoint = _getEmptyPoint(),\n        _currCenterPoint = _getEmptyPoint(),\n        _direction,\n        _isFirstMove,\n        _opacityChanged,\n        _bgOpacity,\n        _wasOverInitialZoom,\n        _isEqualPoints = function _isEqualPoints(p1, p2) {\n      return p1.x === p2.x && p1.y === p2.y;\n    },\n        _isNearbyPoints = function _isNearbyPoints(touch0, touch1) {\n      return Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n    },\n        _calculatePointsDistance = function _calculatePointsDistance(p1, p2) {\n      _tempPoint.x = Math.abs(p1.x - p2.x);\n      _tempPoint.y = Math.abs(p1.y - p2.y);\n      return Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n    },\n        _stopDragUpdateLoop = function _stopDragUpdateLoop() {\n      if (_dragAnimFrame) {\n        _cancelAF(_dragAnimFrame);\n\n        _dragAnimFrame = null;\n      }\n    },\n        _dragUpdateLoop = function _dragUpdateLoop() {\n      if (_isDragging) {\n        _dragAnimFrame = _requestAF(_dragUpdateLoop);\n\n        _renderMovement();\n      }\n    },\n        _canPan = function _canPan() {\n      return !(_options.scaleMode === 'fit' && _currZoomLevel === self.currItem.initialZoomLevel);\n    },\n        // find the closest parent DOM element\n    _closestElement = function _closestElement(el, fn) {\n      if (!el || el === document) {\n        return false;\n      } // don't search elements above pswp__scroll-wrap\n\n\n      if (el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1) {\n        return false;\n      }\n\n      if (fn(el)) {\n        return el;\n      }\n\n      return _closestElement(el.parentNode, fn);\n    },\n        _preventObj = {},\n        _preventDefaultEventBehaviour = function _preventDefaultEventBehaviour(e, isDown) {\n      _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n      _shout('preventDragEvent', e, isDown, _preventObj);\n\n      return _preventObj.prevent;\n    },\n        _convertTouchToPoint = function _convertTouchToPoint(touch, p) {\n      p.x = touch.pageX;\n      p.y = touch.pageY;\n      p.id = touch.identifier;\n      return p;\n    },\n        _findCenterOfPoints = function _findCenterOfPoints(p1, p2, pCenter) {\n      pCenter.x = (p1.x + p2.x) * 0.5;\n      pCenter.y = (p1.y + p2.y) * 0.5;\n    },\n        _pushPosPoint = function _pushPosPoint(time, x, y) {\n      if (time - _gestureCheckSpeedTime > 50) {\n        var o = _posPoints.length > 2 ? _posPoints.shift() : {};\n        o.x = x;\n        o.y = y;\n\n        _posPoints.push(o);\n\n        _gestureCheckSpeedTime = time;\n      }\n    },\n        _calculateVerticalDragOpacityRatio = function _calculateVerticalDragOpacityRatio() {\n      var yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n\n      return 1 - Math.abs(yOffset / (_viewportSize.y / 2));\n    },\n        // points pool, reused during touch events\n    _ePoint1 = {},\n        _ePoint2 = {},\n        _tempPointsArr = [],\n        _tempCounter,\n        _getTouchPoints = function _getTouchPoints(e) {\n      // clean up previous points, without recreating array\n      while (_tempPointsArr.length > 0) {\n        _tempPointsArr.pop();\n      }\n\n      if (!_pointerEventEnabled) {\n        if (e.type.indexOf('touch') > -1) {\n          if (e.touches && e.touches.length > 0) {\n            _tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n\n            if (e.touches.length > 1) {\n              _tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n            }\n          }\n        } else {\n          _ePoint1.x = e.pageX;\n          _ePoint1.y = e.pageY;\n          _ePoint1.id = '';\n          _tempPointsArr[0] = _ePoint1; //_ePoint1;\n        }\n      } else {\n        _tempCounter = 0; // we can use forEach, as pointer events are supported only in modern browsers\n\n        _currPointers.forEach(function (p) {\n          if (_tempCounter === 0) {\n            _tempPointsArr[0] = p;\n          } else if (_tempCounter === 1) {\n            _tempPointsArr[1] = p;\n          }\n\n          _tempCounter++;\n        });\n      }\n\n      return _tempPointsArr;\n    },\n        _panOrMoveMainScroll = function _panOrMoveMainScroll(axis, delta) {\n      var panFriction,\n          overDiff = 0,\n          newOffset = _panOffset[axis] + delta[axis],\n          startOverDiff,\n          dir = delta[axis] > 0,\n          newMainScrollPosition = _mainScrollPos.x + delta.x,\n          mainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n          newPanPos,\n          newMainScrollPos; // calculate fdistance over the bounds and friction\n\n      if (newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n        panFriction = _options.panEndFriction; // Linear increasing of friction, so at 1/4 of viewport it's at max value. \n        // Looks not as nice as was expected. Left for history.\n        // panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n      } else {\n        panFriction = 1;\n      }\n\n      newOffset = _panOffset[axis] + delta[axis] * panFriction; // move main scroll or start panning\n\n      if (_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n        if (!_currZoomElementStyle) {\n          newMainScrollPos = newMainScrollPosition;\n        } else if (_direction === 'h' && axis === 'x' && !_zoomStarted) {\n          if (dir) {\n            if (newOffset > _currPanBounds.min[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = _currPanBounds.min[axis] - newOffset;\n              startOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n            } // drag right\n\n\n            if ((startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } else {\n            if (newOffset < _currPanBounds.max[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = newOffset - _currPanBounds.max[axis];\n              startOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n            }\n\n            if ((startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } //\n\n        }\n\n        if (axis === 'x') {\n          if (newMainScrollPos !== undefined) {\n            _moveMainScroll(newMainScrollPos, true);\n\n            if (newMainScrollPos === _startMainScrollPos.x) {\n              _mainScrollShifted = false;\n            } else {\n              _mainScrollShifted = true;\n            }\n          }\n\n          if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n            if (newPanPos !== undefined) {\n              _panOffset.x = newPanPos;\n            } else if (!_mainScrollShifted) {\n              _panOffset.x += delta.x * panFriction;\n            }\n          }\n\n          return newMainScrollPos !== undefined;\n        }\n      }\n\n      if (!_mainScrollAnimating) {\n        if (!_mainScrollShifted) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            _panOffset[axis] += delta[axis] * panFriction;\n          }\n        }\n      }\n    },\n        // Pointerdown/touchstart/mousedown handler\n    _onDragStart = function _onDragStart(e) {\n      // Allow dragging only via left mouse button.\n      // As this handler is not added in IE8 - we ignore e.which\n      // \n      // http://www.quirksmode.org/js/events_properties.html\n      // https://developer.mozilla.org/en-US/docs/Web/API/event.button\n      if (e.type === 'mousedown' && e.button > 0) {\n        return;\n      }\n\n      if (_initialZoomRunning) {\n        e.preventDefault();\n        return;\n      }\n\n      if (_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n        return;\n      }\n\n      if (_preventDefaultEventBehaviour(e, true)) {\n        e.preventDefault();\n      }\n\n      _shout('pointerDown');\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex < 0) {\n          pointerIndex = _currPointers.length;\n        }\n\n        _currPointers[pointerIndex] = {\n          x: e.pageX,\n          y: e.pageY,\n          id: e.pointerId\n        };\n      }\n\n      var startPointsList = _getTouchPoints(e),\n          numPoints = startPointsList.length;\n\n      _currentPoints = null;\n\n      _stopAllAnimations(); // init drag\n\n\n      if (!_isDragging || numPoints === 1) {\n        _isDragging = _isFirstMove = true;\n        framework.bind(window, _upMoveEvents, self);\n        _isZoomingIn = _wasOverInitialZoom = _opacityChanged = _verticalDragInitiated = _mainScrollShifted = _moved = _isMultitouch = _zoomStarted = false;\n        _direction = null;\n\n        _shout('firstTouchStart', startPointsList);\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _currPanDist.x = _currPanDist.y = 0;\n\n        _equalizePoints(_currPoint, startPointsList[0]);\n\n        _equalizePoints(_startPoint, _currPoint); //_equalizePoints(_startMainScrollPos, _mainScrollPos);\n\n\n        _startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n        _posPoints = [{\n          x: _currPoint.x,\n          y: _currPoint.y\n        }];\n        _gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime(); //_mainScrollAnimationEnd(true);\n\n        _calculatePanBounds(_currZoomLevel, true); // Start rendering\n\n\n        _stopDragUpdateLoop();\n\n        _dragUpdateLoop();\n      } // init zoom\n\n\n      if (!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n        _startZoomLevel = _currZoomLevel;\n        _zoomStarted = false; // true if zoom changed at least once\n\n        _isZooming = _isMultitouch = true;\n        _currPanDist.y = _currPanDist.x = 0;\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _equalizePoints(p, startPointsList[0]);\n\n        _equalizePoints(p2, startPointsList[1]);\n\n        _findCenterOfPoints(p, p2, _currCenterPoint);\n\n        _midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n        _currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n      }\n    },\n        // Pointermove/touchmove/mousemove handler\n    _onDragMove = function _onDragMove(e) {\n      e.preventDefault();\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          var p = _currPointers[pointerIndex];\n          p.x = e.pageX;\n          p.y = e.pageY;\n        }\n      }\n\n      if (_isDragging) {\n        var touchesList = _getTouchPoints(e);\n\n        if (!_direction && !_moved && !_isZooming) {\n          if (_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n            // if main scroll position is shifted  direction is always horizontal\n            _direction = 'h';\n          } else {\n            var diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y); // check the direction of movement\n\n            if (Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n              _direction = diff > 0 ? 'h' : 'v';\n              _currentPoints = touchesList;\n            }\n          }\n        } else {\n          _currentPoints = touchesList;\n        }\n      }\n    },\n        // \n    _renderMovement = function _renderMovement() {\n      if (!_currentPoints) {\n        return;\n      }\n\n      var numPoints = _currentPoints.length;\n\n      if (numPoints === 0) {\n        return;\n      }\n\n      _equalizePoints(p, _currentPoints[0]);\n\n      delta.x = p.x - _currPoint.x;\n      delta.y = p.y - _currPoint.y;\n\n      if (_isZooming && numPoints > 1) {\n        // Handle behaviour for more than 1 point\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // check if one of two points changed\n\n        if (!delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2)) {\n          return;\n        }\n\n        _equalizePoints(p2, _currentPoints[1]);\n\n        if (!_zoomStarted) {\n          _zoomStarted = true;\n\n          _shout('zoomGestureStarted');\n        } // Distance between two points\n\n\n        var pointsDistance = _calculatePointsDistance(p, p2);\n\n        var zoomLevel = _calculateZoomLevel(pointsDistance); // slightly over the of initial zoom level\n\n\n        if (zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n          _wasOverInitialZoom = true;\n        } // Apply the friction if zoom level is out of the bounds\n\n\n        var zoomFriction = 1,\n            minZoomLevel = _getMinZoomLevel(),\n            maxZoomLevel = _getMaxZoomLevel();\n\n        if (zoomLevel < minZoomLevel) {\n          if (_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n            // fade out background if zooming out\n            var minusDiff = minZoomLevel - zoomLevel;\n            var percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n            _applyBgOpacity(percent);\n\n            _shout('onPinchClose', percent);\n\n            _opacityChanged = true;\n          } else {\n            zoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n\n            if (zoomFriction > 1) {\n              zoomFriction = 1;\n            }\n\n            zoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n          }\n        } else if (zoomLevel > maxZoomLevel) {\n          // 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n          zoomFriction = (zoomLevel - maxZoomLevel) / (minZoomLevel * 6);\n\n          if (zoomFriction > 1) {\n            zoomFriction = 1;\n          }\n\n          zoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n        }\n\n        if (zoomFriction < 0) {\n          zoomFriction = 0;\n        } // distance between touch points after friction is applied\n\n\n        _currPointsDistance = pointsDistance; // _centerPoint - The point in the middle of two pointers\n\n        _findCenterOfPoints(p, p2, _centerPoint); // paning with two pointers pressed\n\n\n        _currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n        _currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n\n        _equalizePoints(_currCenterPoint, _centerPoint);\n\n        _panOffset.x = _calculatePanOffset('x', zoomLevel);\n        _panOffset.y = _calculatePanOffset('y', zoomLevel);\n        _isZoomingIn = zoomLevel > _currZoomLevel;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan();\n      } else {\n        // handle behaviour for one point (dragging or panning)\n        if (!_direction) {\n          return;\n        }\n\n        if (_isFirstMove) {\n          _isFirstMove = false; // subtract drag distance that was used during the detection direction  \n\n          if (Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n            delta.x -= _currentPoints[0].x - _startPoint.x;\n          }\n\n          if (Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n            delta.y -= _currentPoints[0].y - _startPoint.y;\n          }\n        }\n\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // do nothing if pointers position hasn't changed\n\n        if (delta.x === 0 && delta.y === 0) {\n          return;\n        }\n\n        if (_direction === 'v' && _options.closeOnVerticalDrag) {\n          if (!_canPan()) {\n            _currPanDist.y += delta.y;\n            _panOffset.y += delta.y;\n\n            var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n            _verticalDragInitiated = true;\n\n            _shout('onVerticalDrag', opacityRatio);\n\n            _applyBgOpacity(opacityRatio);\n\n            _applyCurrentZoomPan();\n\n            return;\n          }\n        }\n\n        _pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n        _moved = true;\n        _currPanBounds = self.currItem.bounds;\n\n        var mainScrollChanged = _panOrMoveMainScroll('x', delta);\n\n        if (!mainScrollChanged) {\n          _panOrMoveMainScroll('y', delta);\n\n          _roundPoint(_panOffset);\n\n          _applyCurrentZoomPan();\n        }\n      }\n    },\n        // Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n    _onDragRelease = function _onDragRelease(e) {\n      if (_features.isOldAndroid) {\n        if (_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n          return;\n        } // on Android (v4.1, 4.2, 4.3 & possibly older) \n        // ghost mousedown/up event isn't preventable via e.preventDefault,\n        // which causes fake mousedown event\n        // so we block mousedown/up for 600ms\n\n\n        if (e.type.indexOf('touch') > -1) {\n          clearTimeout(_oldAndroidTouchEndTimeout);\n          _oldAndroidTouchEndTimeout = setTimeout(function () {\n            _oldAndroidTouchEndTimeout = 0;\n          }, 600);\n        }\n      }\n\n      _shout('pointerUp');\n\n      if (_preventDefaultEventBehaviour(e, false)) {\n        e.preventDefault();\n      }\n\n      var releasePoint;\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          releasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n          if (navigator.msPointerEnabled) {\n            var MSPOINTER_TYPES = {\n              4: 'mouse',\n              // event.MSPOINTER_TYPE_MOUSE\n              2: 'touch',\n              // event.MSPOINTER_TYPE_TOUCH \n              3: 'pen' // event.MSPOINTER_TYPE_PEN\n\n            };\n            releasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n            if (!releasePoint.type) {\n              releasePoint.type = e.pointerType || 'mouse';\n            }\n          } else {\n            releasePoint.type = e.pointerType || 'mouse';\n          }\n        }\n      }\n\n      var touchList = _getTouchPoints(e),\n          gestureType,\n          numPoints = touchList.length;\n\n      if (e.type === 'mouseup') {\n        numPoints = 0;\n      } // Do nothing if there were 3 touch points or more\n\n\n      if (numPoints === 2) {\n        _currentPoints = null;\n        return true;\n      } // if second pointer released\n\n\n      if (numPoints === 1) {\n        _equalizePoints(_startPoint, touchList[0]);\n      } // pointer hasn't moved, send \"tap release\" point\n\n\n      if (numPoints === 0 && !_direction && !_mainScrollAnimating) {\n        if (!releasePoint) {\n          if (e.type === 'mouseup') {\n            releasePoint = {\n              x: e.pageX,\n              y: e.pageY,\n              type: 'mouse'\n            };\n          } else if (e.changedTouches && e.changedTouches[0]) {\n            releasePoint = {\n              x: e.changedTouches[0].pageX,\n              y: e.changedTouches[0].pageY,\n              type: 'touch'\n            };\n          }\n        }\n\n        _shout('touchRelease', e, releasePoint);\n      } // Difference in time between releasing of two last touch points (zoom gesture)\n\n\n      var releaseTimeDiff = -1; // Gesture completed, no pointers left\n\n      if (numPoints === 0) {\n        _isDragging = false;\n        framework.unbind(window, _upMoveEvents, self);\n\n        _stopDragUpdateLoop();\n\n        if (_isZooming) {\n          // Two points released at the same time\n          releaseTimeDiff = 0;\n        } else if (_lastReleaseTime !== -1) {\n          releaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n        }\n      }\n\n      _lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\n      if (releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n        gestureType = 'zoom';\n      } else {\n        gestureType = 'swipe';\n      }\n\n      if (_isZooming && numPoints < 2) {\n        _isZooming = false; // Only second point released\n\n        if (numPoints === 1) {\n          gestureType = 'zoomPointerUp';\n        }\n\n        _shout('zoomGestureEnded');\n      }\n\n      _currentPoints = null;\n\n      if (!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n        // nothing to animate\n        return;\n      }\n\n      _stopAllAnimations();\n\n      if (!_releaseAnimData) {\n        _releaseAnimData = _initDragReleaseAnimationData();\n      }\n\n      _releaseAnimData.calculateSwipeSpeed('x');\n\n      if (_verticalDragInitiated) {\n        var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n        if (opacityRatio < _options.verticalDragRange) {\n          self.close();\n        } else {\n          var initalPanY = _panOffset.y,\n              initialBgOpacity = _bgOpacity;\n\n          _animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function (now) {\n            _panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n            _applyBgOpacity((1 - initialBgOpacity) * now + initialBgOpacity);\n\n            _applyCurrentZoomPan();\n          });\n\n          _shout('onVerticalDrag', 1);\n        }\n\n        return;\n      } // main scroll \n\n\n      if ((_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n        var itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\n        if (itemChanged) {\n          return;\n        }\n\n        gestureType = 'zoomPointerUp';\n      } // prevent zoom/pan animation when main scroll animation runs\n\n\n      if (_mainScrollAnimating) {\n        return;\n      } // Complete simple zoom gesture (reset zoom level if it's out of the bounds)  \n\n\n      if (gestureType !== 'swipe') {\n        _completeZoomGesture();\n\n        return;\n      } // Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n\n\n      if (!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n        _completePanGesture(_releaseAnimData);\n      }\n    },\n        // Returns object with data about gesture\n    // It's created only once and then reused\n    _initDragReleaseAnimationData = function _initDragReleaseAnimationData() {\n      // temp local vars\n      var lastFlickDuration, tempReleasePos; // s = this\n\n      var s = {\n        lastFlickOffset: {},\n        lastFlickDist: {},\n        lastFlickSpeed: {},\n        slowDownRatio: {},\n        slowDownRatioReverse: {},\n        speedDecelerationRatio: {},\n        speedDecelerationRatioAbs: {},\n        distanceOffset: {},\n        backAnimDestination: {},\n        backAnimStarted: {},\n        calculateSwipeSpeed: function calculateSwipeSpeed(axis) {\n          if (_posPoints.length > 1) {\n            lastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n            tempReleasePos = _posPoints[_posPoints.length - 2][axis];\n          } else {\n            lastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n\n            tempReleasePos = _startPoint[axis];\n          }\n\n          s.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n          s.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n\n          if (s.lastFlickDist[axis] > 20) {\n            s.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n          } else {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          if (Math.abs(s.lastFlickSpeed[axis]) < 0.1) {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          s.slowDownRatio[axis] = 0.95;\n          s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n          s.speedDecelerationRatio[axis] = 1;\n        },\n        calculateOverBoundsAnimOffset: function calculateOverBoundsAnimOffset(axis, speed) {\n          if (!s.backAnimStarted[axis]) {\n            if (_panOffset[axis] > _currPanBounds.min[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.min[axis];\n            } else if (_panOffset[axis] < _currPanBounds.max[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.max[axis];\n            }\n\n            if (s.backAnimDestination[axis] !== undefined) {\n              s.slowDownRatio[axis] = 0.7;\n              s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\n              if (s.speedDecelerationRatioAbs[axis] < 0.05) {\n                s.lastFlickSpeed[axis] = 0;\n                s.backAnimStarted[axis] = true;\n\n                _animateProp('bounceZoomPan' + axis, _panOffset[axis], s.backAnimDestination[axis], speed || 300, framework.easing.sine.out, function (pos) {\n                  _panOffset[axis] = pos;\n\n                  _applyCurrentZoomPan();\n                });\n              }\n            }\n          }\n        },\n        // Reduces the speed by slowDownRatio (per 10ms)\n        calculateAnimOffset: function calculateAnimOffset(axis) {\n          if (!s.backAnimStarted[axis]) {\n            s.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + s.slowDownRatioReverse[axis] - s.slowDownRatioReverse[axis] * s.timeDiff / 10);\n            s.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n            s.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n            _panOffset[axis] += s.distanceOffset[axis];\n          }\n        },\n        panAnimLoop: function panAnimLoop() {\n          if (_animations.zoomPan) {\n            _animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n            s.now = _getCurrentTime();\n            s.timeDiff = s.now - s.lastNow;\n            s.lastNow = s.now;\n            s.calculateAnimOffset('x');\n            s.calculateAnimOffset('y');\n\n            _applyCurrentZoomPan();\n\n            s.calculateOverBoundsAnimOffset('x');\n            s.calculateOverBoundsAnimOffset('y');\n\n            if (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n              // round pan position\n              _panOffset.x = Math.round(_panOffset.x);\n              _panOffset.y = Math.round(_panOffset.y);\n\n              _applyCurrentZoomPan();\n\n              _stopAnimation('zoomPan');\n\n              return;\n            }\n          }\n        }\n      };\n      return s;\n    },\n        _completePanGesture = function _completePanGesture(animData) {\n      // calculate swipe speed for Y axis (paanning)\n      animData.calculateSwipeSpeed('y');\n      _currPanBounds = self.currItem.bounds;\n      animData.backAnimDestination = {};\n      animData.backAnimStarted = {}; // Avoid acceleration animation if speed is too low\n\n      if (Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05) {\n        animData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0; // Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n\n        animData.calculateOverBoundsAnimOffset('x');\n        animData.calculateOverBoundsAnimOffset('y');\n        return true;\n      } // Animation loop that controls the acceleration after pan gesture ends\n\n\n      _registerStartAnimation('zoomPan');\n\n      animData.lastNow = _getCurrentTime();\n      animData.panAnimLoop();\n    },\n        _finishSwipeMainScrollGesture = function _finishSwipeMainScrollGesture(gestureType, _releaseAnimData) {\n      var itemChanged;\n\n      if (!_mainScrollAnimating) {\n        _currZoomedItemIndex = _currentItemIndex;\n      }\n\n      var itemsDiff;\n\n      if (gestureType === 'swipe') {\n        var totalShiftDist = _currPoint.x - _startPoint.x,\n            isFastLastFlick = _releaseAnimData.lastFlickDist.x < 10; // if container is shifted for more than MIN_SWIPE_DISTANCE, \n        // and last flick gesture was in right direction\n\n        if (totalShiftDist > MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20)) {\n          // go to prev item\n          itemsDiff = -1;\n        } else if (totalShiftDist < -MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20)) {\n          // go to next item\n          itemsDiff = 1;\n        }\n      }\n\n      var nextCircle;\n\n      if (itemsDiff) {\n        _currentItemIndex += itemsDiff;\n\n        if (_currentItemIndex < 0) {\n          _currentItemIndex = _options.loop ? _getNumItems() - 1 : 0;\n          nextCircle = true;\n        } else if (_currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = _options.loop ? 0 : _getNumItems() - 1;\n          nextCircle = true;\n        }\n\n        if (!nextCircle || _options.loop) {\n          _indexDiff += itemsDiff;\n          _currPositionIndex -= itemsDiff;\n          itemChanged = true;\n        }\n      }\n\n      var animateToX = _slideSize.x * _currPositionIndex;\n      var animateToDist = Math.abs(animateToX - _mainScrollPos.x);\n      var finishAnimDuration;\n\n      if (!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n        // \"return to current\" duration, e.g. when dragging from slide 0 to -1\n        finishAnimDuration = 333;\n      } else {\n        finishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? animateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : 333;\n        finishAnimDuration = Math.min(finishAnimDuration, 400);\n        finishAnimDuration = Math.max(finishAnimDuration, 250);\n      }\n\n      if (_currZoomedItemIndex === _currentItemIndex) {\n        itemChanged = false;\n      }\n\n      _mainScrollAnimating = true;\n\n      _shout('mainScrollAnimStart');\n\n      _animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, _moveMainScroll, function () {\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        _currZoomedItemIndex = -1;\n\n        if (itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n          self.updateCurrItem();\n        }\n\n        _shout('mainScrollAnimComplete');\n      });\n\n      if (itemChanged) {\n        self.updateCurrItem(true);\n      }\n\n      return itemChanged;\n    },\n        _calculateZoomLevel = function _calculateZoomLevel(touchesDistance) {\n      return 1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n    },\n        // Resets zoom if it's out of bounds\n    _completeZoomGesture = function _completeZoomGesture() {\n      var destZoomLevel = _currZoomLevel,\n          minZoomLevel = _getMinZoomLevel(),\n          maxZoomLevel = _getMaxZoomLevel();\n\n      if (_currZoomLevel < minZoomLevel) {\n        destZoomLevel = minZoomLevel;\n      } else if (_currZoomLevel > maxZoomLevel) {\n        destZoomLevel = maxZoomLevel;\n      }\n\n      var destOpacity = 1,\n          onUpdate,\n          initialOpacity = _bgOpacity;\n\n      if (_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n        //_closedByScroll = true;\n        self.close();\n        return true;\n      }\n\n      if (_opacityChanged) {\n        onUpdate = function onUpdate(now) {\n          _applyBgOpacity((destOpacity - initialOpacity) * now + initialOpacity);\n        };\n      }\n\n      self.zoomTo(destZoomLevel, 0, 200, framework.easing.cubic.out, onUpdate);\n      return true;\n    };\n\n    _registerModule('Gestures', {\n      publicMethods: {\n        initGestures: function initGestures() {\n          // helper function that builds touch/pointer/mouse events\n          var addEventNames = function addEventNames(pref, down, move, up, cancel) {\n            _dragStartEvent = pref + down;\n            _dragMoveEvent = pref + move;\n            _dragEndEvent = pref + up;\n\n            if (cancel) {\n              _dragCancelEvent = pref + cancel;\n            } else {\n              _dragCancelEvent = '';\n            }\n          };\n\n          _pointerEventEnabled = _features.pointerEvent;\n\n          if (_pointerEventEnabled && _features.touch) {\n            // we don't need touch events, if browser supports pointer events\n            _features.touch = false;\n          }\n\n          if (_pointerEventEnabled) {\n            if (navigator.msPointerEnabled) {\n              // IE10 pointer events are case-sensitive\n              addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n            } else {\n              addEventNames('pointer', 'down', 'move', 'up', 'cancel');\n            }\n          } else if (_features.touch) {\n            addEventNames('touch', 'start', 'move', 'end', 'cancel');\n            _likelyTouchDevice = true;\n          } else {\n            addEventNames('mouse', 'down', 'move', 'up');\n          }\n\n          _upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent + ' ' + _dragCancelEvent;\n          _downEvents = _dragStartEvent;\n\n          if (_pointerEventEnabled && !_likelyTouchDevice) {\n            _likelyTouchDevice = navigator.maxTouchPoints > 1 || navigator.msMaxTouchPoints > 1;\n          } // make variable public\n\n\n          self.likelyTouchDevice = _likelyTouchDevice;\n          _globalEventHandlers[_dragStartEvent] = _onDragStart;\n          _globalEventHandlers[_dragMoveEvent] = _onDragMove;\n          _globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n          if (_dragCancelEvent) {\n            _globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n          } // Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n\n\n          if (_features.touch) {\n            _downEvents += ' mousedown';\n            _upMoveEvents += ' mousemove mouseup';\n            _globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n            _globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n            _globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n          }\n\n          if (!_likelyTouchDevice) {\n            // don't allow pan to next slide from zoomed state on Desktop\n            _options.allowPanToNext = false;\n          }\n        }\n      }\n    });\n    /*>>gestures*/\n\n    /*>>show-hide-transition*/\n\n    /**\n     * show-hide-transition.js:\n     *\n     * Manages initial opening or closing transition.\n     *\n     * If you're not planning to use transition for gallery at all,\n     * you may set options hideAnimationDuration and showAnimationDuration to 0,\n     * and just delete startAnimation function.\n     * \n     */\n\n\n    var _showOrHideTimeout,\n        _showOrHide = function _showOrHide(item, img, out, completeFn) {\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      _initialZoomRunning = true;\n      _initialContentSet = true; // dimensions of small thumbnail {x:,y:,w:}.\n      // Height is optional, as calculated based on large image.\n\n      var thumbBounds;\n\n      if (item.initialLayout) {\n        thumbBounds = item.initialLayout;\n        item.initialLayout = null;\n      } else {\n        thumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n      }\n\n      var duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n      var onComplete = function onComplete() {\n        _stopAnimation('initialZoom');\n\n        if (!out) {\n          _applyBgOpacity(1);\n\n          if (img) {\n            img.style.display = 'block';\n          }\n\n          framework.addClass(template, 'pswp--animated-in');\n\n          _shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n        } else {\n          self.template.removeAttribute('style');\n          self.bg.removeAttribute('style');\n        }\n\n        if (completeFn) {\n          completeFn();\n        }\n\n        _initialZoomRunning = false;\n      }; // if bounds aren't provided, just open gallery without animation\n\n\n      if (!duration || !thumbBounds || thumbBounds.x === undefined) {\n        _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n        _currZoomLevel = item.initialZoomLevel;\n\n        _equalizePoints(_panOffset, item.initialPosition);\n\n        _applyCurrentZoomPan();\n\n        template.style.opacity = out ? 0 : 1;\n\n        _applyBgOpacity(1);\n\n        if (duration) {\n          setTimeout(function () {\n            onComplete();\n          }, duration);\n        } else {\n          onComplete();\n        }\n\n        return;\n      }\n\n      var startAnimation = function startAnimation() {\n        var closeWithRaf = _closedByScroll,\n            fadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity; // apply hw-acceleration to image\n\n        if (item.miniImg) {\n          item.miniImg.style.webkitBackfaceVisibility = 'hidden';\n        }\n\n        if (!out) {\n          _currZoomLevel = thumbBounds.w / item.w;\n          _panOffset.x = thumbBounds.x;\n          _panOffset.y = thumbBounds.y - _initalWindowScrollY;\n          self[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n\n          _applyCurrentZoomPan();\n        }\n\n        _registerStartAnimation('initialZoom');\n\n        if (out && !closeWithRaf) {\n          framework.removeClass(template, 'pswp--animated-in');\n        }\n\n        if (fadeEverything) {\n          if (out) {\n            framework[(closeWithRaf ? 'remove' : 'add') + 'Class'](template, 'pswp--animate_opacity');\n          } else {\n            setTimeout(function () {\n              framework.addClass(template, 'pswp--animate_opacity');\n            }, 30);\n          }\n        }\n\n        _showOrHideTimeout = setTimeout(function () {\n          _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n          if (!out) {\n            // \"in\" animation always uses CSS transitions (instead of rAF).\n            // CSS transition work faster here, \n            // as developer may also want to animate other things, \n            // like ui on top of sliding area, which can be animated just via CSS\n            _currZoomLevel = item.initialZoomLevel;\n\n            _equalizePoints(_panOffset, item.initialPosition);\n\n            _applyCurrentZoomPan();\n\n            _applyBgOpacity(1);\n\n            if (fadeEverything) {\n              template.style.opacity = 1;\n            } else {\n              _applyBgOpacity(1);\n            }\n\n            _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n          } else {\n            // \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n            var destZoomLevel = thumbBounds.w / item.w,\n                initialPanOffset = {\n              x: _panOffset.x,\n              y: _panOffset.y\n            },\n                initialZoomLevel = _currZoomLevel,\n                initalBgOpacity = _bgOpacity,\n                onUpdate = function onUpdate(now) {\n              if (now === 1) {\n                _currZoomLevel = destZoomLevel;\n                _panOffset.x = thumbBounds.x;\n                _panOffset.y = thumbBounds.y - _currentWindowScrollY;\n              } else {\n                _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n                _panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n                _panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n              }\n\n              _applyCurrentZoomPan();\n\n              if (fadeEverything) {\n                template.style.opacity = 1 - now;\n              } else {\n                _applyBgOpacity(initalBgOpacity - now * initalBgOpacity);\n              }\n            };\n\n            if (closeWithRaf) {\n              _animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n            } else {\n              onUpdate(1);\n              _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n            }\n          }\n        }, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n        // create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n        // Which avoids lag at the beginning of scale transition.\n      };\n\n      startAnimation();\n    };\n    /*>>show-hide-transition*/\n\n    /*>>items-controller*/\n\n    /**\n    *\n    * Controller manages gallery items, their dimensions, and their content.\n    * \n    */\n\n\n    var _items,\n        _tempPanAreaSize = {},\n        _imagesToAppendPool = [],\n        _initialContentSet,\n        _initialZoomRunning,\n        _controllerDefaultOptions = {\n      index: 0,\n      errorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n      forceProgressiveLoading: false,\n      // TODO\n      preload: [1, 1],\n      getNumItemsFn: function getNumItemsFn() {\n        return _items.length;\n      }\n    };\n\n    var _getItemAt,\n        _getNumItems,\n        _initialIsLoop,\n        _getZeroBounds = function _getZeroBounds() {\n      return {\n        center: {\n          x: 0,\n          y: 0\n        },\n        max: {\n          x: 0,\n          y: 0\n        },\n        min: {\n          x: 0,\n          y: 0\n        }\n      };\n    },\n        _calculateSingleItemPanBounds = function _calculateSingleItemPanBounds(item, realPanElementW, realPanElementH) {\n      var bounds = item.bounds; // position of element when it's centered\n\n      bounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n      bounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top; // maximum pan position\n\n      bounds.max.x = realPanElementW > _tempPanAreaSize.x ? Math.round(_tempPanAreaSize.x - realPanElementW) : bounds.center.x;\n      bounds.max.y = realPanElementH > _tempPanAreaSize.y ? Math.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : bounds.center.y; // minimum pan position\n\n      bounds.min.x = realPanElementW > _tempPanAreaSize.x ? 0 : bounds.center.x;\n      bounds.min.y = realPanElementH > _tempPanAreaSize.y ? item.vGap.top : bounds.center.y;\n    },\n        _calculateItemSize = function _calculateItemSize(item, viewportSize, zoomLevel) {\n      if (item.src && !item.loadError) {\n        var isInitial = !zoomLevel;\n\n        if (isInitial) {\n          if (!item.vGap) {\n            item.vGap = {\n              top: 0,\n              bottom: 0\n            };\n          } // allows overriding vertical margin for individual items\n\n\n          _shout('parseVerticalMargin', item);\n        }\n\n        _tempPanAreaSize.x = viewportSize.x;\n        _tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n        if (isInitial) {\n          var hRatio = _tempPanAreaSize.x / item.w;\n          var vRatio = _tempPanAreaSize.y / item.h;\n          item.fitRatio = hRatio < vRatio ? hRatio : vRatio; //item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n          var scaleMode = _options.scaleMode;\n\n          if (scaleMode === 'orig') {\n            zoomLevel = 1;\n          } else if (scaleMode === 'fit') {\n            zoomLevel = item.fitRatio;\n          }\n\n          if (zoomLevel > 1) {\n            zoomLevel = 1;\n          }\n\n          item.initialZoomLevel = zoomLevel;\n\n          if (!item.bounds) {\n            // reuse bounds object\n            item.bounds = _getZeroBounds();\n          }\n        }\n\n        if (!zoomLevel) {\n          return;\n        }\n\n        _calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n        if (isInitial && zoomLevel === item.initialZoomLevel) {\n          item.initialPosition = item.bounds.center;\n        }\n\n        return item.bounds;\n      } else {\n        item.w = item.h = 0;\n        item.initialZoomLevel = item.fitRatio = 1;\n        item.bounds = _getZeroBounds();\n        item.initialPosition = item.bounds.center; // if it's not image, we return zero bounds (content is not zoomable)\n\n        return item.bounds;\n      }\n    },\n        _appendImage = function _appendImage(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n      if (item.loadError) {\n        return;\n      }\n\n      if (img) {\n        item.imageAppended = true;\n\n        _setImageSize(item, img, item === self.currItem && _renderMaxResolution);\n\n        baseDiv.appendChild(img);\n\n        if (keepPlaceholder) {\n          setTimeout(function () {\n            if (item && item.loaded && item.placeholder) {\n              item.placeholder.style.display = 'none';\n              item.placeholder = null;\n            }\n          }, 500);\n        }\n      }\n    },\n        _preloadImage = function _preloadImage(item) {\n      item.loading = true;\n      item.loaded = false;\n      var img = item.img = framework.createEl('pswp__img', 'img');\n\n      var onComplete = function onComplete() {\n        item.loading = false;\n        item.loaded = true;\n\n        if (item.loadComplete) {\n          item.loadComplete(item);\n        } else {\n          item.img = null; // no need to store image object\n        }\n\n        img.onload = img.onerror = null;\n        img = null;\n      };\n\n      img.onload = onComplete;\n\n      img.onerror = function () {\n        item.loadError = true;\n        onComplete();\n      };\n\n      img.src = item.src; // + '?a=' + Math.random();\n\n      return img;\n    },\n        _checkForError = function _checkForError(item, cleanUp) {\n      if (item.src && item.loadError && item.container) {\n        if (cleanUp) {\n          item.container.innerHTML = '';\n        }\n\n        item.container.innerHTML = _options.errorMsg.replace('%url%', item.src);\n        return true;\n      }\n    },\n        _setImageSize = function _setImageSize(item, img, maxRes) {\n      if (!item.src) {\n        return;\n      }\n\n      if (!img) {\n        img = item.container.lastChild;\n      }\n\n      var w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n          h = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\n      if (item.placeholder && !item.loaded) {\n        item.placeholder.style.width = w + 'px';\n        item.placeholder.style.height = h + 'px';\n      }\n\n      img.style.width = w + 'px';\n      img.style.height = h + 'px';\n    },\n        _appendImagesPool = function _appendImagesPool() {\n      if (_imagesToAppendPool.length) {\n        var poolItem;\n\n        for (var i = 0; i < _imagesToAppendPool.length; i++) {\n          poolItem = _imagesToAppendPool[i];\n\n          if (poolItem.holder.index === poolItem.index) {\n            _appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n          }\n        }\n\n        _imagesToAppendPool = [];\n      }\n    };\n\n    _registerModule('Controller', {\n      publicMethods: {\n        lazyLoadItem: function lazyLoadItem(index) {\n          index = _getLoopedId(index);\n\n          var item = _getItemAt(index);\n\n          if (!item || (item.loaded || item.loading) && !_itemsNeedUpdate) {\n            return;\n          }\n\n          _shout('gettingData', index, item);\n\n          if (!item.src) {\n            return;\n          }\n\n          _preloadImage(item);\n        },\n        initController: function initController() {\n          framework.extend(_options, _controllerDefaultOptions, true);\n          self.items = _items = items;\n          _getItemAt = self.getItemAt;\n          _getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n          _initialIsLoop = _options.loop;\n\n          if (_getNumItems() < 3) {\n            _options.loop = false; // disable loop if less then 3 items\n          }\n\n          _listen('beforeChange', function (diff) {\n            var p = _options.preload,\n                isNext = diff === null ? true : diff >= 0,\n                preloadBefore = Math.min(p[0], _getNumItems()),\n                preloadAfter = Math.min(p[1], _getNumItems()),\n                i;\n\n            for (i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n              self.lazyLoadItem(_currentItemIndex + i);\n            }\n\n            for (i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n              self.lazyLoadItem(_currentItemIndex - i);\n            }\n          });\n\n          _listen('initialLayout', function () {\n            self.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n          });\n\n          _listen('mainScrollAnimComplete', _appendImagesPool);\n\n          _listen('initialZoomInEnd', _appendImagesPool);\n\n          _listen('destroy', function () {\n            var item;\n\n            for (var i = 0; i < _items.length; i++) {\n              item = _items[i]; // remove reference to DOM elements, for GC\n\n              if (item.container) {\n                item.container = null;\n              }\n\n              if (item.placeholder) {\n                item.placeholder = null;\n              }\n\n              if (item.img) {\n                item.img = null;\n              }\n\n              if (item.preloader) {\n                item.preloader = null;\n              }\n\n              if (item.loadError) {\n                item.loaded = item.loadError = false;\n              }\n            }\n\n            _imagesToAppendPool = null;\n          });\n        },\n        getItemAt: function getItemAt(index) {\n          if (index >= 0) {\n            return _items[index] !== undefined ? _items[index] : false;\n          }\n\n          return false;\n        },\n        allowProgressiveImg: function allowProgressiveImg() {\n          // 1. Progressive image loading isn't working on webkit/blink \n          //    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n          //    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n          //    \n          // 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n          //    That's why it's disabled on touch devices (mainly because of swipe transition)\n          //    \n          // 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n          // Don't allow progressive loading on non-large touch devices\n          return _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200; // 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n        },\n        setContent: function setContent(holder, index) {\n          if (_options.loop) {\n            index = _getLoopedId(index);\n          }\n\n          var prevItem = self.getItemAt(holder.index);\n\n          if (prevItem) {\n            prevItem.container = null;\n          }\n\n          var item = self.getItemAt(index),\n              img;\n\n          if (!item) {\n            holder.el.innerHTML = '';\n            return;\n          } // allow to override data\n\n\n          _shout('gettingData', index, item);\n\n          holder.index = index;\n          holder.item = item; // base container DIV is created only once for each of 3 holders\n\n          var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n          if (!item.src && item.html) {\n            if (item.html.tagName) {\n              baseDiv.appendChild(item.html);\n            } else {\n              baseDiv.innerHTML = item.html;\n            }\n          }\n\n          _checkForError(item);\n\n          _calculateItemSize(item, _viewportSize);\n\n          if (item.src && !item.loadError && !item.loaded) {\n            item.loadComplete = function (item) {\n              // gallery closed before image finished loading\n              if (!_isOpen) {\n                return;\n              } // check if holder hasn't changed while image was loading\n\n\n              if (holder && holder.index === index) {\n                if (_checkForError(item, true)) {\n                  item.loadComplete = item.img = null;\n\n                  _calculateItemSize(item, _viewportSize);\n\n                  _applyZoomPanToItem(item);\n\n                  if (holder.index === _currentItemIndex) {\n                    // recalculate dimensions\n                    self.updateCurrZoomItem();\n                  }\n\n                  return;\n                }\n\n                if (!item.imageAppended) {\n                  if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                    _imagesToAppendPool.push({\n                      item: item,\n                      baseDiv: baseDiv,\n                      img: item.img,\n                      index: index,\n                      holder: holder,\n                      clearPlaceholder: true\n                    });\n                  } else {\n                    _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                  }\n                } else {\n                  // remove preloader & mini-img\n                  if (!_initialZoomRunning && item.placeholder) {\n                    item.placeholder.style.display = 'none';\n                    item.placeholder = null;\n                  }\n                }\n              }\n\n              item.loadComplete = null;\n              item.img = null; // no need to store image element after it's added\n\n              _shout('imageLoadComplete', index, item);\n            };\n\n            if (framework.features.transform) {\n              var placeholderClassName = 'pswp__img pswp__img--placeholder';\n              placeholderClassName += item.msrc ? '' : ' pswp__img--placeholder--blank';\n              var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\n              if (item.msrc) {\n                placeholder.src = item.msrc;\n              }\n\n              _setImageSize(item, placeholder);\n\n              baseDiv.appendChild(placeholder);\n              item.placeholder = placeholder;\n            }\n\n            if (!item.loading) {\n              _preloadImage(item);\n            }\n\n            if (self.allowProgressiveImg()) {\n              // just append image\n              if (!_initialContentSet && _features.transform) {\n                _imagesToAppendPool.push({\n                  item: item,\n                  baseDiv: baseDiv,\n                  img: item.img,\n                  index: index,\n                  holder: holder\n                });\n              } else {\n                _appendImage(index, item, baseDiv, item.img, true, true);\n              }\n            }\n          } else if (item.src && !item.loadError) {\n            // image object is created every time, due to bugs of image loading & delay when switching images\n            img = framework.createEl('pswp__img', 'img');\n            img.style.opacity = 1;\n            img.src = item.src;\n\n            _setImageSize(item, img);\n\n            _appendImage(index, item, baseDiv, img, true);\n          }\n\n          if (!_initialContentSet && index === _currentItemIndex) {\n            _currZoomElementStyle = baseDiv.style;\n\n            _showOrHide(item, img || item.img);\n          } else {\n            _applyZoomPanToItem(item);\n          }\n\n          holder.el.innerHTML = '';\n          holder.el.appendChild(baseDiv);\n        },\n        cleanSlide: function cleanSlide(item) {\n          if (item.img) {\n            item.img.onload = item.img.onerror = null;\n          }\n\n          item.loaded = item.loading = item.img = item.imageAppended = false;\n        }\n      }\n    });\n    /*>>items-controller*/\n\n    /*>>tap*/\n\n    /**\n     * tap.js:\n     *\n     * Displatches tap and double-tap events.\n     * \n     */\n\n\n    var tapTimer,\n        tapReleasePoint = {},\n        _dispatchTapEvent = function _dispatchTapEvent(origEvent, releasePoint, pointerType) {\n      var e = document.createEvent('CustomEvent'),\n          eDetail = {\n        origEvent: origEvent,\n        target: origEvent.target,\n        releasePoint: releasePoint,\n        pointerType: pointerType || 'touch'\n      };\n      e.initCustomEvent('pswpTap', true, true, eDetail);\n      origEvent.target.dispatchEvent(e);\n    };\n\n    _registerModule('Tap', {\n      publicMethods: {\n        initTap: function initTap() {\n          _listen('firstTouchStart', self.onTapStart);\n\n          _listen('touchRelease', self.onTapRelease);\n\n          _listen('destroy', function () {\n            tapReleasePoint = {};\n            tapTimer = null;\n          });\n        },\n        onTapStart: function onTapStart(touchList) {\n          if (touchList.length > 1) {\n            clearTimeout(tapTimer);\n            tapTimer = null;\n          }\n        },\n        onTapRelease: function onTapRelease(e, releasePoint) {\n          if (!releasePoint) {\n            return;\n          }\n\n          if (!_moved && !_isMultitouch && !_numAnimations) {\n            var p0 = releasePoint;\n\n            if (tapTimer) {\n              clearTimeout(tapTimer);\n              tapTimer = null; // Check if taped on the same place\n\n              if (_isNearbyPoints(p0, tapReleasePoint)) {\n                _shout('doubleTap', p0);\n\n                return;\n              }\n            }\n\n            if (releasePoint.type === 'mouse') {\n              _dispatchTapEvent(e, releasePoint, 'mouse');\n\n              return;\n            }\n\n            var clickedTagName = e.target.tagName.toUpperCase(); // avoid double tap delay on buttons and elements that have class pswp__single-tap\n\n            if (clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap')) {\n              _dispatchTapEvent(e, releasePoint);\n\n              return;\n            }\n\n            _equalizePoints(tapReleasePoint, p0);\n\n            tapTimer = setTimeout(function () {\n              _dispatchTapEvent(e, releasePoint);\n\n              tapTimer = null;\n            }, 300);\n          }\n        }\n      }\n    });\n    /*>>tap*/\n\n    /*>>desktop-zoom*/\n\n    /**\n     *\n     * desktop-zoom.js:\n     *\n     * - Binds mousewheel event for paning zoomed image.\n     * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n     *   (which are used for cursors and zoom icon)\n     * - Adds toggleDesktopZoom function.\n     * \n     */\n\n\n    var _wheelDelta;\n\n    _registerModule('DesktopZoom', {\n      publicMethods: {\n        initDesktopZoom: function initDesktopZoom() {\n          if (_oldIE) {\n            // no zoom for old IE (<=8)\n            return;\n          }\n\n          if (_likelyTouchDevice) {\n            // if detected hardware touch support, we wait until mouse is used,\n            // and only then apply desktop-zoom features\n            _listen('mouseUsed', function () {\n              self.setupDesktopZoom();\n            });\n          } else {\n            self.setupDesktopZoom(true);\n          }\n        },\n        setupDesktopZoom: function setupDesktopZoom(onInit) {\n          _wheelDelta = {};\n          var events = 'wheel mousewheel DOMMouseScroll';\n\n          _listen('bindEvents', function () {\n            framework.bind(template, events, self.handleMouseWheel);\n          });\n\n          _listen('unbindEvents', function () {\n            if (_wheelDelta) {\n              framework.unbind(template, events, self.handleMouseWheel);\n            }\n          });\n\n          self.mouseZoomedIn = false;\n\n          var hasDraggingClass,\n              updateZoomable = function updateZoomable() {\n            if (self.mouseZoomedIn) {\n              framework.removeClass(template, 'pswp--zoomed-in');\n              self.mouseZoomedIn = false;\n            }\n\n            if (_currZoomLevel < 1) {\n              framework.addClass(template, 'pswp--zoom-allowed');\n            } else {\n              framework.removeClass(template, 'pswp--zoom-allowed');\n            }\n\n            removeDraggingClass();\n          },\n              removeDraggingClass = function removeDraggingClass() {\n            if (hasDraggingClass) {\n              framework.removeClass(template, 'pswp--dragging');\n              hasDraggingClass = false;\n            }\n          };\n\n          _listen('resize', updateZoomable);\n\n          _listen('afterChange', updateZoomable);\n\n          _listen('pointerDown', function () {\n            if (self.mouseZoomedIn) {\n              hasDraggingClass = true;\n              framework.addClass(template, 'pswp--dragging');\n            }\n          });\n\n          _listen('pointerUp', removeDraggingClass);\n\n          if (!onInit) {\n            updateZoomable();\n          }\n        },\n        handleMouseWheel: function handleMouseWheel(e) {\n          if (_currZoomLevel <= self.currItem.fitRatio) {\n            if (_options.modal) {\n              if (!_options.closeOnScroll || _numAnimations || _isDragging) {\n                e.preventDefault();\n              } else if (_transformKey && Math.abs(e.deltaY) > 2) {\n                // close PhotoSwipe\n                // if browser supports transforms & scroll changed enough\n                _closedByScroll = true;\n                self.close();\n              }\n            }\n\n            return true;\n          } // allow just one event to fire\n\n\n          e.stopPropagation(); // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n\n          _wheelDelta.x = 0;\n\n          if ('deltaX' in e) {\n            if (e.deltaMode === 1\n            /* DOM_DELTA_LINE */\n            ) {\n                // 18 - average line height\n                _wheelDelta.x = e.deltaX * 18;\n                _wheelDelta.y = e.deltaY * 18;\n              } else {\n              _wheelDelta.x = e.deltaX;\n              _wheelDelta.y = e.deltaY;\n            }\n          } else if ('wheelDelta' in e) {\n            if (e.wheelDeltaX) {\n              _wheelDelta.x = -0.16 * e.wheelDeltaX;\n            }\n\n            if (e.wheelDeltaY) {\n              _wheelDelta.y = -0.16 * e.wheelDeltaY;\n            } else {\n              _wheelDelta.y = -0.16 * e.wheelDelta;\n            }\n          } else if ('detail' in e) {\n            _wheelDelta.y = e.detail;\n          } else {\n            return;\n          }\n\n          _calculatePanBounds(_currZoomLevel, true);\n\n          var newPanX = _panOffset.x - _wheelDelta.x,\n              newPanY = _panOffset.y - _wheelDelta.y; // only prevent scrolling in nonmodal mode when not at edges\n\n          if (_options.modal || newPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x && newPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y) {\n            e.preventDefault();\n          } // TODO: use rAF instead of mousewheel?\n\n\n          self.panTo(newPanX, newPanY);\n        },\n        toggleDesktopZoom: function toggleDesktopZoom(centerPoint) {\n          centerPoint = centerPoint || {\n            x: _viewportSize.x / 2 + _offset.x,\n            y: _viewportSize.y / 2 + _offset.y\n          };\n\n          var doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n\n          var zoomOut = _currZoomLevel === doubleTapZoomLevel;\n          self.mouseZoomedIn = !zoomOut;\n          self.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n          framework[(!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n        }\n      }\n    });\n    /*>>desktop-zoom*/\n\n    /*>>history*/\n\n    /**\n     *\n     * history.js:\n     *\n     * - Back button to close gallery.\n     * \n     * - Unique URL for each slide: example.com/&pid=1&gid=3\n     *   (where PID is picture index, and GID and gallery index)\n     *   \n     * - Switch URL when slides change.\n     * \n     */\n\n\n    var _historyDefaultOptions = {\n      history: true,\n      galleryUID: 1\n    };\n\n    var _historyUpdateTimeout,\n        _hashChangeTimeout,\n        _hashAnimCheckTimeout,\n        _hashChangedByScript,\n        _hashChangedByHistory,\n        _hashReseted,\n        _initialHash,\n        _historyChanged,\n        _closedFromURL,\n        _urlChangedOnce,\n        _windowLoc,\n        _supportsPushState,\n        _getHash = function _getHash() {\n      return _windowLoc.hash.substring(1);\n    },\n        _cleanHistoryTimeouts = function _cleanHistoryTimeouts() {\n      if (_historyUpdateTimeout) {\n        clearTimeout(_historyUpdateTimeout);\n      }\n\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n    },\n        // pid - Picture index\n    // gid - Gallery index\n    _parseItemIndexFromURL = function _parseItemIndexFromURL() {\n      var hash = _getHash(),\n          params = {};\n\n      if (hash.length < 5) {\n        // pid=1\n        return params;\n      }\n\n      var i,\n          vars = hash.split('&');\n\n      for (i = 0; i < vars.length; i++) {\n        if (!vars[i]) {\n          continue;\n        }\n\n        var pair = vars[i].split('=');\n\n        if (pair.length < 2) {\n          continue;\n        }\n\n        params[pair[0]] = pair[1];\n      }\n\n      if (_options.galleryPIDs) {\n        // detect custom pid in hash and search for it among the items collection\n        var searchfor = params.pid;\n        params.pid = 0; // if custom pid cannot be found, fallback to the first item\n\n        for (i = 0; i < _items.length; i++) {\n          if (_items[i].pid === searchfor) {\n            params.pid = i;\n            break;\n          }\n        }\n      } else {\n        params.pid = parseInt(params.pid, 10) - 1;\n      }\n\n      if (params.pid < 0) {\n        params.pid = 0;\n      }\n\n      return params;\n    },\n        _updateHash = function _updateHash() {\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n\n      if (_numAnimations || _isDragging) {\n        // changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n        // that's why we update hash only when no animations running\n        _hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n        return;\n      }\n\n      if (_hashChangedByScript) {\n        clearTimeout(_hashChangeTimeout);\n      } else {\n        _hashChangedByScript = true;\n      }\n\n      var pid = _currentItemIndex + 1;\n\n      var item = _getItemAt(_currentItemIndex);\n\n      if (item.hasOwnProperty('pid')) {\n        // carry forward any custom pid assigned to the item\n        pid = item.pid;\n      }\n\n      var newHash = _initialHash + '&' + 'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n      if (!_historyChanged) {\n        if (_windowLoc.hash.indexOf(newHash) === -1) {\n          _urlChangedOnce = true;\n        } // first time - add new hisory record, then just replace\n\n      }\n\n      var newURL = _windowLoc.href.split('#')[0] + '#' + newHash;\n\n      if (_supportsPushState) {\n        if ('#' + newHash !== window.location.hash) {\n          history[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n        }\n      } else {\n        if (_historyChanged) {\n          _windowLoc.replace(newURL);\n        } else {\n          _windowLoc.hash = newHash;\n        }\n      }\n\n      _historyChanged = true;\n      _hashChangeTimeout = setTimeout(function () {\n        _hashChangedByScript = false;\n      }, 60);\n    };\n\n    _registerModule('History', {\n      publicMethods: {\n        initHistory: function initHistory() {\n          framework.extend(_options, _historyDefaultOptions, true);\n\n          if (!_options.history) {\n            return;\n          }\n\n          _windowLoc = window.location;\n          _urlChangedOnce = false;\n          _closedFromURL = false;\n          _historyChanged = false;\n          _initialHash = _getHash();\n          _supportsPushState = 'pushState' in history;\n\n          if (_initialHash.indexOf('gid=') > -1) {\n            _initialHash = _initialHash.split('&gid=')[0];\n            _initialHash = _initialHash.split('?gid=')[0];\n          }\n\n          _listen('afterChange', self.updateURL);\n\n          _listen('unbindEvents', function () {\n            framework.unbind(window, 'hashchange', self.onHashChange);\n          });\n\n          var returnToOriginal = function returnToOriginal() {\n            _hashReseted = true;\n\n            if (!_closedFromURL) {\n              if (_urlChangedOnce) {\n                history.back();\n              } else {\n                if (_initialHash) {\n                  _windowLoc.hash = _initialHash;\n                } else {\n                  if (_supportsPushState) {\n                    // remove hash from url without refreshing it or scrolling to top\n                    history.pushState('', document.title, _windowLoc.pathname + _windowLoc.search);\n                  } else {\n                    _windowLoc.hash = '';\n                  }\n                }\n              }\n            }\n\n            _cleanHistoryTimeouts();\n          };\n\n          _listen('unbindEvents', function () {\n            if (_closedByScroll) {\n              // if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n              // this is done to keep the scroll position\n              returnToOriginal();\n            }\n          });\n\n          _listen('destroy', function () {\n            if (!_hashReseted) {\n              returnToOriginal();\n            }\n          });\n\n          _listen('firstUpdate', function () {\n            _currentItemIndex = _parseItemIndexFromURL().pid;\n          });\n\n          var index = _initialHash.indexOf('pid=');\n\n          if (index > -1) {\n            _initialHash = _initialHash.substring(0, index);\n\n            if (_initialHash.slice(-1) === '&') {\n              _initialHash = _initialHash.slice(0, -1);\n            }\n          }\n\n          setTimeout(function () {\n            if (_isOpen) {\n              // hasn't destroyed yet\n              framework.bind(window, 'hashchange', self.onHashChange);\n            }\n          }, 40);\n        },\n        onHashChange: function onHashChange() {\n          if (_getHash() === _initialHash) {\n            _closedFromURL = true;\n            self.close();\n            return;\n          }\n\n          if (!_hashChangedByScript) {\n            _hashChangedByHistory = true;\n            self.goTo(_parseItemIndexFromURL().pid);\n            _hashChangedByHistory = false;\n          }\n        },\n        updateURL: function updateURL() {\n          // Delay the update of URL, to avoid lag during transition, \n          // and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n          _cleanHistoryTimeouts();\n\n          if (_hashChangedByHistory) {\n            return;\n          }\n\n          if (!_historyChanged) {\n            _updateHash(); // first time\n\n          } else {\n            _historyUpdateTimeout = setTimeout(_updateHash, 800);\n          }\n        }\n      }\n    });\n    /*>>history*/\n\n\n    framework.extend(self, publicMethods);\n  };\n\n  return PhotoSwipe;\n});","/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n\n/**\n*\n* UI on top of main sliding area (caption, arrows, close button, etc.).\n* Built just using public methods/properties of PhotoSwipe.\n* \n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipeUI_Default = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipeUI_Default = function PhotoSwipeUI_Default(pswp, framework) {\n    var ui = this;\n\n    var _overlayUIUpdated = false,\n        _controlsVisible = true,\n        _fullscrenAPI,\n        _controls,\n        _captionContainer,\n        _fakeCaptionContainer,\n        _indexIndicator,\n        _shareButton,\n        _shareModal,\n        _shareModalHidden = true,\n        _initalCloseOnScrollValue,\n        _isIdle,\n        _listen,\n        _loadingIndicator,\n        _loadingIndicatorHidden,\n        _loadingIndicatorTimeout,\n        _galleryHasOneSlide,\n        _options,\n        _defaultUIOptions = {\n      barsSize: {\n        top: 44,\n        bottom: 'auto'\n      },\n      closeElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\n      timeToIdle: 4000,\n      timeToIdleOutside: 1000,\n      loadingIndicatorDelay: 1000,\n      // 2s\n      addCaptionHTMLFn: function addCaptionHTMLFn(item, captionEl\n      /*, isFake */\n      ) {\n        if (!item.title) {\n          captionEl.children[0].innerHTML = '';\n          return false;\n        }\n\n        captionEl.children[0].innerHTML = item.title;\n        return true;\n      },\n      closeEl: true,\n      captionEl: true,\n      fullscreenEl: true,\n      zoomEl: true,\n      shareEl: true,\n      counterEl: true,\n      arrowEl: true,\n      preloaderEl: true,\n      tapToClose: false,\n      tapToToggleControls: true,\n      clickToCloseNonZoomable: true,\n      shareButtons: [{\n        id: 'facebook',\n        label: 'Share on Facebook',\n        url: 'https://www.facebook.com/sharer/sharer.php?u={{url}}'\n      }, {\n        id: 'twitter',\n        label: 'Tweet',\n        url: 'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'\n      }, {\n        id: 'pinterest',\n        label: 'Pin it',\n        url: 'http://www.pinterest.com/pin/create/button/' + '?url={{url}}&media={{image_url}}&description={{text}}'\n      }, {\n        id: 'download',\n        label: 'Download image',\n        url: '{{raw_image_url}}',\n        download: true\n      }],\n      getImageURLForShare: function getImageURLForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.src || '';\n      },\n      getPageURLForShare: function getPageURLForShare()\n      /* shareButtonData */\n      {\n        return window.location.href;\n      },\n      getTextForShare: function getTextForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.title || '';\n      },\n      indexIndicatorSep: ' / ',\n      fitControlsWidth: 1200\n    },\n        _blockControlsTap,\n        _blockControlsTapTimeout;\n\n    var _onControlsTap = function _onControlsTap(e) {\n      if (_blockControlsTap) {\n        return true;\n      }\n\n      e = e || window.event;\n\n      if (_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n        // reset idle timer\n        _onIdleMouseMove();\n      }\n\n      var target = e.target || e.srcElement,\n          uiElement,\n          clickedClass = target.getAttribute('class') || '',\n          found;\n\n      for (var i = 0; i < _uiElements.length; i++) {\n        uiElement = _uiElements[i];\n\n        if (uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name) > -1) {\n          uiElement.onTap();\n          found = true;\n        }\n      }\n\n      if (found) {\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n\n        _blockControlsTap = true; // Some versions of Android don't prevent ghost click event \n        // when preventDefault() was called on touchstart and/or touchend.\n        // \n        // This happens on v4.3, 4.2, 4.1, \n        // older versions strangely work correctly, \n        // but just in case we add delay on all of them)\t\n\n        var tapDelay = framework.features.isOldAndroid ? 600 : 30;\n        _blockControlsTapTimeout = setTimeout(function () {\n          _blockControlsTap = false;\n        }, tapDelay);\n      }\n    },\n        _fitControlsInViewport = function _fitControlsInViewport() {\n      return !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n    },\n        _togglePswpClass = function _togglePswpClass(el, cName, add) {\n      framework[(add ? 'add' : 'remove') + 'Class'](el, 'pswp__' + cName);\n    },\n        // add class when there is just one item in the gallery\n    // (by default it hides left/right arrows and 1ofX counter)\n    _countNumItems = function _countNumItems() {\n      var hasOneSlide = _options.getNumItemsFn() === 1;\n\n      if (hasOneSlide !== _galleryHasOneSlide) {\n        _togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n\n        _galleryHasOneSlide = hasOneSlide;\n      }\n    },\n        _toggleShareModalClass = function _toggleShareModalClass() {\n      _togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n    },\n        _toggleShareModal = function _toggleShareModal() {\n      _shareModalHidden = !_shareModalHidden;\n\n      if (!_shareModalHidden) {\n        _toggleShareModalClass();\n\n        setTimeout(function () {\n          if (!_shareModalHidden) {\n            framework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n          }\n        }, 30);\n      } else {\n        framework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n        setTimeout(function () {\n          if (_shareModalHidden) {\n            _toggleShareModalClass();\n          }\n        }, 300);\n      }\n\n      if (!_shareModalHidden) {\n        _updateShareURLs();\n      }\n\n      return false;\n    },\n        _openWindowPopup = function _openWindowPopup(e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n      pswp.shout('shareLinkClick', e, target);\n\n      if (!target.href) {\n        return false;\n      }\n\n      if (target.hasAttribute('download')) {\n        return true;\n      }\n\n      window.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,' + 'location=yes,width=550,height=420,top=100,left=' + (window.screen ? Math.round(screen.width / 2 - 275) : 100));\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      return false;\n    },\n        _updateShareURLs = function _updateShareURLs() {\n      var shareButtonOut = '',\n          shareButtonData,\n          shareURL,\n          image_url,\n          page_url,\n          share_text;\n\n      for (var i = 0; i < _options.shareButtons.length; i++) {\n        shareButtonData = _options.shareButtons[i];\n        image_url = _options.getImageURLForShare(shareButtonData);\n        page_url = _options.getPageURLForShare(shareButtonData);\n        share_text = _options.getTextForShare(shareButtonData);\n        shareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url)).replace('{{image_url}}', encodeURIComponent(image_url)).replace('{{raw_image_url}}', image_url).replace('{{text}}', encodeURIComponent(share_text));\n        shareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" ' + 'class=\"pswp__share--' + shareButtonData.id + '\"' + (shareButtonData.download ? 'download' : '') + '>' + shareButtonData.label + '</a>';\n\n        if (_options.parseShareButtonOut) {\n          shareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n        }\n      }\n\n      _shareModal.children[0].innerHTML = shareButtonOut;\n      _shareModal.children[0].onclick = _openWindowPopup;\n    },\n        _hasCloseClass = function _hasCloseClass(target) {\n      for (var i = 0; i < _options.closeElClasses.length; i++) {\n        if (framework.hasClass(target, 'pswp__' + _options.closeElClasses[i])) {\n          return true;\n        }\n      }\n    },\n        _idleInterval,\n        _idleTimer,\n        _idleIncrement = 0,\n        _onIdleMouseMove = function _onIdleMouseMove() {\n      clearTimeout(_idleTimer);\n      _idleIncrement = 0;\n\n      if (_isIdle) {\n        ui.setIdle(false);\n      }\n    },\n        _onMouseLeaveWindow = function _onMouseLeaveWindow(e) {\n      e = e ? e : window.event;\n      var from = e.relatedTarget || e.toElement;\n\n      if (!from || from.nodeName === 'HTML') {\n        clearTimeout(_idleTimer);\n        _idleTimer = setTimeout(function () {\n          ui.setIdle(true);\n        }, _options.timeToIdleOutside);\n      }\n    },\n        _setupFullscreenAPI = function _setupFullscreenAPI() {\n      if (_options.fullscreenEl && !framework.features.isOldAndroid) {\n        if (!_fullscrenAPI) {\n          _fullscrenAPI = ui.getFullscreenAPI();\n        }\n\n        if (_fullscrenAPI) {\n          framework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n          ui.updateFullscreen();\n          framework.addClass(pswp.template, 'pswp--supports-fs');\n        } else {\n          framework.removeClass(pswp.template, 'pswp--supports-fs');\n        }\n      }\n    },\n        _setupLoadingIndicator = function _setupLoadingIndicator() {\n      // Setup loading indicator\n      if (_options.preloaderEl) {\n        _toggleLoadingIndicator(true);\n\n        _listen('beforeChange', function () {\n          clearTimeout(_loadingIndicatorTimeout); // display loading indicator with delay\n\n          _loadingIndicatorTimeout = setTimeout(function () {\n            if (pswp.currItem && pswp.currItem.loading) {\n              if (!pswp.allowProgressiveImg() || pswp.currItem.img && !pswp.currItem.img.naturalWidth) {\n                // show preloader if progressive loading is not enabled, \n                // or image width is not defined yet (because of slow connection)\n                _toggleLoadingIndicator(false); // items-controller.js function allowProgressiveImg\n\n              }\n            } else {\n              _toggleLoadingIndicator(true); // hide preloader\n\n            }\n          }, _options.loadingIndicatorDelay);\n        });\n\n        _listen('imageLoadComplete', function (index, item) {\n          if (pswp.currItem === item) {\n            _toggleLoadingIndicator(true);\n          }\n        });\n      }\n    },\n        _toggleLoadingIndicator = function _toggleLoadingIndicator(hide) {\n      if (_loadingIndicatorHidden !== hide) {\n        _togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n\n        _loadingIndicatorHidden = hide;\n      }\n    },\n        _applyNavBarGaps = function _applyNavBarGaps(item) {\n      var gap = item.vGap;\n\n      if (_fitControlsInViewport()) {\n        var bars = _options.barsSize;\n\n        if (_options.captionEl && bars.bottom === 'auto') {\n          if (!_fakeCaptionContainer) {\n            _fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n\n            _fakeCaptionContainer.appendChild(framework.createEl('pswp__caption__center'));\n\n            _controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n\n            framework.addClass(_controls, 'pswp__ui--fit');\n          }\n\n          if (_options.addCaptionHTMLFn(item, _fakeCaptionContainer, true)) {\n            var captionSize = _fakeCaptionContainer.clientHeight;\n            gap.bottom = parseInt(captionSize, 10) || 44;\n          } else {\n            gap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n          }\n        } else {\n          gap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n        } // height of top bar is static, no need to calculate it\n\n\n        gap.top = bars.top;\n      } else {\n        gap.top = gap.bottom = 0;\n      }\n    },\n        _setupIdle = function _setupIdle() {\n      // Hide controls when mouse is used\n      if (_options.timeToIdle) {\n        _listen('mouseUsed', function () {\n          framework.bind(document, 'mousemove', _onIdleMouseMove);\n          framework.bind(document, 'mouseout', _onMouseLeaveWindow);\n          _idleInterval = setInterval(function () {\n            _idleIncrement++;\n\n            if (_idleIncrement === 2) {\n              ui.setIdle(true);\n            }\n          }, _options.timeToIdle / 2);\n        });\n      }\n    },\n        _setupHidingControlsDuringGestures = function _setupHidingControlsDuringGestures() {\n      // Hide controls on vertical drag\n      _listen('onVerticalDrag', function (now) {\n        if (_controlsVisible && now < 0.95) {\n          ui.hideControls();\n        } else if (!_controlsVisible && now >= 0.95) {\n          ui.showControls();\n        }\n      }); // Hide controls when pinching to close\n\n\n      var pinchControlsHidden;\n\n      _listen('onPinchClose', function (now) {\n        if (_controlsVisible && now < 0.9) {\n          ui.hideControls();\n          pinchControlsHidden = true;\n        } else if (pinchControlsHidden && !_controlsVisible && now > 0.9) {\n          ui.showControls();\n        }\n      });\n\n      _listen('zoomGestureEnded', function () {\n        pinchControlsHidden = false;\n\n        if (pinchControlsHidden && !_controlsVisible) {\n          ui.showControls();\n        }\n      });\n    };\n\n    var _uiElements = [{\n      name: 'caption',\n      option: 'captionEl',\n      onInit: function onInit(el) {\n        _captionContainer = el;\n      }\n    }, {\n      name: 'share-modal',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareModal = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--share',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareButton = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--zoom',\n      option: 'zoomEl',\n      onTap: pswp.toggleDesktopZoom\n    }, {\n      name: 'counter',\n      option: 'counterEl',\n      onInit: function onInit(el) {\n        _indexIndicator = el;\n      }\n    }, {\n      name: 'button--close',\n      option: 'closeEl',\n      onTap: pswp.close\n    }, {\n      name: 'button--arrow--left',\n      option: 'arrowEl',\n      onTap: pswp.prev\n    }, {\n      name: 'button--arrow--right',\n      option: 'arrowEl',\n      onTap: pswp.next\n    }, {\n      name: 'button--fs',\n      option: 'fullscreenEl',\n      onTap: function onTap() {\n        if (_fullscrenAPI.isFullscreen()) {\n          _fullscrenAPI.exit();\n        } else {\n          _fullscrenAPI.enter();\n        }\n      }\n    }, {\n      name: 'preloader',\n      option: 'preloaderEl',\n      onInit: function onInit(el) {\n        _loadingIndicator = el;\n      }\n    }];\n\n    var _setupUIElements = function _setupUIElements() {\n      var item, classAttr, uiElement;\n\n      var loopThroughChildElements = function loopThroughChildElements(sChildren) {\n        if (!sChildren) {\n          return;\n        }\n\n        var l = sChildren.length;\n\n        for (var i = 0; i < l; i++) {\n          item = sChildren[i];\n          classAttr = item.className;\n\n          for (var a = 0; a < _uiElements.length; a++) {\n            uiElement = _uiElements[a];\n\n            if (classAttr.indexOf('pswp__' + uiElement.name) > -1) {\n              if (_options[uiElement.option]) {\n                // if element is not disabled from options\n                framework.removeClass(item, 'pswp__element--disabled');\n\n                if (uiElement.onInit) {\n                  uiElement.onInit(item);\n                } //item.style.display = 'block';\n\n              } else {\n                framework.addClass(item, 'pswp__element--disabled'); //item.style.display = 'none';\n              }\n            }\n          }\n        }\n      };\n\n      loopThroughChildElements(_controls.children);\n      var topBar = framework.getChildByClass(_controls, 'pswp__top-bar');\n\n      if (topBar) {\n        loopThroughChildElements(topBar.children);\n      }\n    };\n\n    ui.init = function () {\n      // extend options\n      framework.extend(pswp.options, _defaultUIOptions, true); // create local link for fast access\n\n      _options = pswp.options; // find pswp__ui element\n\n      _controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui'); // create local link\n\n      _listen = pswp.listen;\n\n      _setupHidingControlsDuringGestures(); // update controls when slides change\n\n\n      _listen('beforeChange', ui.update); // toggle zoom on double-tap\n\n\n      _listen('doubleTap', function (point) {\n        var initialZoomLevel = pswp.currItem.initialZoomLevel;\n\n        if (pswp.getZoomLevel() !== initialZoomLevel) {\n          pswp.zoomTo(initialZoomLevel, point, 333);\n        } else {\n          pswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n        }\n      }); // Allow text selection in caption\n\n\n      _listen('preventDragEvent', function (e, isDown, preventObj) {\n        var t = e.target || e.srcElement;\n\n        if (t && t.getAttribute('class') && e.type.indexOf('mouse') > -1 && (t.getAttribute('class').indexOf('__caption') > 0 || /(SMALL|STRONG|EM)/i.test(t.tagName))) {\n          preventObj.prevent = false;\n        }\n      }); // bind events for UI\n\n\n      _listen('bindEvents', function () {\n        framework.bind(_controls, 'pswpTap click', _onControlsTap);\n        framework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n        if (!pswp.likelyTouchDevice) {\n          framework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n        }\n      }); // unbind events for UI\n\n\n      _listen('unbindEvents', function () {\n        if (!_shareModalHidden) {\n          _toggleShareModal();\n        }\n\n        if (_idleInterval) {\n          clearInterval(_idleInterval);\n        }\n\n        framework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n        framework.unbind(document, 'mousemove', _onIdleMouseMove);\n        framework.unbind(_controls, 'pswpTap click', _onControlsTap);\n        framework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n        framework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n        if (_fullscrenAPI) {\n          framework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\n          if (_fullscrenAPI.isFullscreen()) {\n            _options.hideAnimationDuration = 0;\n\n            _fullscrenAPI.exit();\n          }\n\n          _fullscrenAPI = null;\n        }\n      }); // clean up things when gallery is destroyed\n\n\n      _listen('destroy', function () {\n        if (_options.captionEl) {\n          if (_fakeCaptionContainer) {\n            _controls.removeChild(_fakeCaptionContainer);\n          }\n\n          framework.removeClass(_captionContainer, 'pswp__caption--empty');\n        }\n\n        if (_shareModal) {\n          _shareModal.children[0].onclick = null;\n        }\n\n        framework.removeClass(_controls, 'pswp__ui--over-close');\n        framework.addClass(_controls, 'pswp__ui--hidden');\n        ui.setIdle(false);\n      });\n\n      if (!_options.showAnimationDuration) {\n        framework.removeClass(_controls, 'pswp__ui--hidden');\n      }\n\n      _listen('initialZoomIn', function () {\n        if (_options.showAnimationDuration) {\n          framework.removeClass(_controls, 'pswp__ui--hidden');\n        }\n      });\n\n      _listen('initialZoomOut', function () {\n        framework.addClass(_controls, 'pswp__ui--hidden');\n      });\n\n      _listen('parseVerticalMargin', _applyNavBarGaps);\n\n      _setupUIElements();\n\n      if (_options.shareEl && _shareButton && _shareModal) {\n        _shareModalHidden = true;\n      }\n\n      _countNumItems();\n\n      _setupIdle();\n\n      _setupFullscreenAPI();\n\n      _setupLoadingIndicator();\n    };\n\n    ui.setIdle = function (isIdle) {\n      _isIdle = isIdle;\n\n      _togglePswpClass(_controls, 'ui--idle', isIdle);\n    };\n\n    ui.update = function () {\n      // Don't update UI if it's hidden\n      if (_controlsVisible && pswp.currItem) {\n        ui.updateIndexIndicator();\n\n        if (_options.captionEl) {\n          _options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n          _togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n        }\n\n        _overlayUIUpdated = true;\n      } else {\n        _overlayUIUpdated = false;\n      }\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      _countNumItems();\n    };\n\n    ui.updateFullscreen = function (e) {\n      if (e) {\n        // some browsers change window scroll position during the fullscreen\n        // so PhotoSwipe updates it just in case\n        setTimeout(function () {\n          pswp.setScrollOffset(0, framework.getScrollY());\n        }, 50);\n      } // toogle pswp--fs class on root element\n\n\n      framework[(_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class'](pswp.template, 'pswp--fs');\n    };\n\n    ui.updateIndexIndicator = function () {\n      if (_options.counterEl) {\n        _indexIndicator.innerHTML = pswp.getCurrentIndex() + 1 + _options.indexIndicatorSep + _options.getNumItemsFn();\n      }\n    };\n\n    ui.onGlobalTap = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (_blockControlsTap) {\n        return;\n      }\n\n      if (e.detail && e.detail.pointerType === 'mouse') {\n        // close gallery if clicked outside of the image\n        if (_hasCloseClass(target)) {\n          pswp.close();\n          return;\n        }\n\n        if (framework.hasClass(target, 'pswp__img')) {\n          if (pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n            if (_options.clickToCloseNonZoomable) {\n              pswp.close();\n            }\n          } else {\n            pswp.toggleDesktopZoom(e.detail.releasePoint);\n          }\n        }\n      } else {\n        // tap anywhere (except buttons) to toggle visibility of controls\n        if (_options.tapToToggleControls) {\n          if (_controlsVisible) {\n            ui.hideControls();\n          } else {\n            ui.showControls();\n          }\n        } // tap to close gallery\n\n\n        if (_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target))) {\n          pswp.close();\n          return;\n        }\n      }\n    };\n\n    ui.onMouseOver = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement; // add class when mouse is over an element that should close the gallery\n\n      _togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n    };\n\n    ui.hideControls = function () {\n      framework.addClass(_controls, 'pswp__ui--hidden');\n      _controlsVisible = false;\n    };\n\n    ui.showControls = function () {\n      _controlsVisible = true;\n\n      if (!_overlayUIUpdated) {\n        ui.update();\n      }\n\n      framework.removeClass(_controls, 'pswp__ui--hidden');\n    };\n\n    ui.supportsFullscreen = function () {\n      var d = document;\n      return !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n    };\n\n    ui.getFullscreenAPI = function () {\n      var dE = document.documentElement,\n          api,\n          tF = 'fullscreenchange';\n\n      if (dE.requestFullscreen) {\n        api = {\n          enterK: 'requestFullscreen',\n          exitK: 'exitFullscreen',\n          elementK: 'fullscreenElement',\n          eventK: tF\n        };\n      } else if (dE.mozRequestFullScreen) {\n        api = {\n          enterK: 'mozRequestFullScreen',\n          exitK: 'mozCancelFullScreen',\n          elementK: 'mozFullScreenElement',\n          eventK: 'moz' + tF\n        };\n      } else if (dE.webkitRequestFullscreen) {\n        api = {\n          enterK: 'webkitRequestFullscreen',\n          exitK: 'webkitExitFullscreen',\n          elementK: 'webkitFullscreenElement',\n          eventK: 'webkit' + tF\n        };\n      } else if (dE.msRequestFullscreen) {\n        api = {\n          enterK: 'msRequestFullscreen',\n          exitK: 'msExitFullscreen',\n          elementK: 'msFullscreenElement',\n          eventK: 'MSFullscreenChange'\n        };\n      }\n\n      if (api) {\n        api.enter = function () {\n          // disable close-on-scroll in fullscreen\n          _initalCloseOnScrollValue = _options.closeOnScroll;\n          _options.closeOnScroll = false;\n\n          if (this.enterK === 'webkitRequestFullscreen') {\n            pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);\n          } else {\n            return pswp.template[this.enterK]();\n          }\n        };\n\n        api.exit = function () {\n          _options.closeOnScroll = _initalCloseOnScrollValue;\n          return document[this.exitK]();\n        };\n\n        api.isFullscreen = function () {\n          return document[this.elementK];\n        };\n      }\n\n      return api;\n    };\n  };\n\n  return PhotoSwipeUI_Default;\n});"],"sourceRoot":""}